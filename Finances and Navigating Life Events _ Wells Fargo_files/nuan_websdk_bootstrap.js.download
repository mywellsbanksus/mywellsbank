try{var div=top.document.createElement("DIV");div.innerHTML='<div id="nuance-chat-anchored" style="position: fixed; width: auto; right:20px; bottom:20px; z-index: 999999;"></div>',top.document.body.appendChild(div.firstChild)}catch(t){}try{var div1=top.document.createElement("DIV");div1.innerHTML='<div id="nuance-chat-anchored-2" style="position: fixed; width: auto; right:20px; bottom:20px; z-index: 999988;"></div>',top.document.body.appendChild(div1.firstChild)}catch(t){}try{var div2=top.document.createElement("DIV");div2.innerHTML='<div id="nuance-chat-anchored-mobile" style="position: fixed; width: auto; right:20px; bottom:84px; z-index: 999988;"></div>',top.document.body.appendChild(div2.firstChild)}catch(t){}try{var div3=top.document.createElement("DIV");if(window.WFA.body.hasNavstrip){div3.innerHTML='<div id="nuance-chat-anchored-wim-mobile" style="position: fixed; width: auto; right:0 !important; bottom:106px; top: unset !important; z-index: 999988; visibility: visible"></div>';var styleElement=document.createElement("style"),cssText=".nuance-chat-button {bottom:106px !important;}";styleElement.textContent=cssText,top.document.head.appendChild(styleElement)}else div3.innerHTML='<div id="nuance-chat-anchored-wim-mobile" style="position: fixed; width: auto; right:0 !important; bottom:50px; top: unset !important; z-index: 999988; visibility: visible"></div>';top.document.body.appendChild(div3.firstChild)}catch(t){}window.WF_NUANCE=window.WF_NUANCE||{},window.WF_NUANCE.shouldDisableAgents=window.WF_NUANCE.shouldDisableAgents||!0,window.NuanMessaging=function(){var d,h,e,N,i,S,L,a,n,c=["dataCenter","tagServerName","vendorUUID"],u={},o=["west","east","eu1","lax1","aus"],p=window.document,s={},r="10006005",l="/tagserver/nuanceChat.html",f=0,m=!1,g=!1,M=0,R={},O=[],w={},v=[],E="nuanChatStage",y="nuanMessagingFrame",C=!1,b=!1;window.ADRUM&&(h=new window.ADRUM.events.Ajax);var x={set mode(t){switch(t.toLowerCase()){case"dev":case"development":f=0;break;case"prod":case"production":f=1}},get mode(){return 0===f?"dev":"prod"},set frameID(t){E=t},get frameID(){return E},set siteID(t){r=t},get siteID(){return r},set elementContainerID(t){y=t},get elementContainerID(){return y},set isEmbedded(t){C=t},get isEmbedded(){return C},set embeddedFrame(t){b=t},get embeddedFrame(){return b},getPageData:function(t){return s[t]},setPageData:function(t,e){"WF_NUANCE"===t&&(e.escalateToAgent=!!window.WF_NUANCE&&!window.WF_NUANCE.shouldDisableAgents,e.shouldDisableAgents=!window.WF_NUANCE||window.WF_NUANCE.shouldDisableAgents),s[t]=e},resetPageData:function(){s={}},setMessageWatch:function(t){N=t},get tagServerUrl(){var t=["https://"];return t.push(u.tagServerName),e?t=[e]:-1!==o.indexOf(u.dataCenter)?t.push(".inq.com"):t.push(".digital.nuance.com"),t.join("")},overrideTagDomain:function(t){e=t},get chatLaunchFileAndPath(){return l},set chatLaunchFileAndPath(t){l=t},set pushNotificationID(t){s.nuancePushNotificationDeviceId=t},get pushNotificationID(){return s.nuancePushNotificationDeviceId},registerForMessagingEvents:function(t,e){R[t]||(R[t]=[]),R[t].push(e)},enabledAdBlockDetection:function(){this.addBlockEnabled=!0},enableCustomC2CRendering:function(t){m=!0,a=t},enableC2CPluginForMinimizedState:function(t){a=t},isDragEnabled:function(){return!(!this.dragResize&&void 0!==this.dragResize)},disableDrag:function(){this.dragResize=!1},setMessagingUIConfigs:function(t){this.uiConfig=t},getUIConfig:function(){return this.uiConfig},setFrameConfig:function(t,e,i){this.frameW=t,this.frameH=e,x.WindowPosition[i]?this.framePos=i:this.framePos="LOWER_RIGHT"},getVersion:function(){return"2.5.4"}};function U(t,e,i){this.command=t,this.info=e,this.brData=i}function T(t){var e=t.target;d=(new Date).getTime(),setTimeout(function(){if(window.WFUI_BRIDGE&&!window.WFUI_BRIDGE.frameCollection.getFrame({uuid:u.vendorUUID})){var t={view:{hasUI:!0},data:{src:x.tagServerUrl+x.chatLaunchFileAndPath+"?UUID="+u.vendorUUID,disableIframeTimeout:!0},uuid:u.vendorUUID,isJsonMessage:!0,customIframe:e,customWrapper:e.parentNode,customContract:{uuid:"UUID",type:"command",payload:"info"},vendorData:{}};window.WFUI_BRIDGE.addChildFrame(t,function(){})}n=new $(e),window.addEventListener("message",n.receiveMessage.bind(n)),x.setPageData("InqRegistry",{listeners:Object.keys(R)}),b&&x.setPageData("embeddedFrameCreated",!0),u.vendorUUID&&x.setPageData("vendorUUID",u.vendorUUID),n.sendMessage(new U("StartLoading",x.getUIConfig(),s)),x.resetPageData(),x.addBlockEnabled&&(i.onDetected(D).onNotDetected(A),i.check(!1))},25)}function H(t){n&&n.sendMessage(t)}function _(t){setTimeout(function(){var t=x.tagServerUrl+x.chatLaunchFileAndPath+"?UUID="+u.vendorUUID,e=p.createElement("div");e.id=E,e.classList.add("floating-nuan-chat"),e.style.cssText="z-index:9999999;height:1px;width:1px;border-style: none;border-width: 0px;visibility: visible";var i=['<iframe title="Chat Window"'];i.push(' name="'+x.siteID+'"'),i.push(" aria-hidden=true"),i.push(" hidden=true"),i.push(' scrolling="NO"'),i.push(" frameborder=0"),i.push("></iframe>"),e.innerHTML=i.join("");var n=p.body;if(n){var o=e.getElementsByTagName("IFRAME")[0],s=j()?"":"allow-popups allow-modals";o.setAttribute("src",t),o.setAttribute("sandbox","allow-same-origin allow-scripts "+s),o.onload=T;var r=document.getElementById(y);C&&r?(r.appendChild(e),b=!0):n.appendChild(e),a&&a.setParentElement(e)}},t||25)}function D(){H(new U("AD_BLOCKER_DETECTED"))}function A(){B("ad blocker not detected")}function I(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n}function P(t,e){this.p1=t,this.p2=e}function k(t){this.div=document.createElement("DIV"),this.div.id=t}function W(){top.window.addEventListener("focus",this.setWindowActive),top.window.document.addEventListener("visibilitychange",this.setWindowActive)}function t(n,o,s){var r;return function(){var t=this,e=arguments,i=s&&!r;clearTimeout(r),r=setTimeout(function(){r=null,s||n.apply(t,e)},o),i&&n.apply(t,e)}}function B(t){0==f&&console.log("Messaging-WebSDK:"+t)}function F(t){return null==t||void 0===t}function Y(t,e,i,n){n=n||!1,t.addEventListener?t.addEventListener(e,i,n):t.attachEvent&&t.attachEvent("on"+e,i)}function G(t,e,i,n){Y(t,e,i,n),v.push({target:t,type:e,listener:i})}function V(t,e,i,n){n=n||!1,t.removeEventListener?t.removeEventListener(e,i,n):t.attachEvent&&t.detachEvent("on"+e,i)}function X(t,e){var i;if(w[t]?i=w[t]:window[t]&&(i=window[t]),i)return i.apply(null,e);if(-1!=t.indexOf("."))for(var n,o=t.split("."),s=0;s<o.length;s++)void 0!==n?"function"==typeof n[o[s]]?n[o[s]].apply(parent,e):"object"==typeof n[o[s]]&&(n=n[o[s]]):"function"==typeof parent[o[s]]?parent[o[s]].apply(parent,[cmdParam]):"object"==typeof parent[o[s]]&&(n=parent[o[s]])}function z(){return/(iPad|iPhone|iPod)/g.test(window.navigator.userAgent)}function j(){return"Phone"==S}function K(){return"Tablet"==S}function q(){return K()&&z()}function Z(){var t="Unknown",e=window.navigator.platform,i=window.navigator.userAgent;return/Android/.test(i)?t="Android":/iPhone/.test(i)||/iPad/.test(i)||/iPod/.test(i)?t="iOS":/Win/.test(e)?t="Windows":/Linux/.test(e)?t="Linux":/Mac/.test(e)&&(t="Mac OS"),t}function Q(){return new RegExp("Android.*?(wv|Version\\/[.0-9]+).*?Chrome\\/[0-9]{2}","i").test(window.navigator.userAgent)}x.Events={ON_RULE_SATISFIED:"onRuleSatisfied",ON_SERVICE_INVITATION:"onServiceInvitation",ON_SERVICE_ENGAGED:"onServiceEngaged",ON_SERVICE_INTERACTED:"onServiceInteracted",ON_SERVICE_MISSED:"onServiceMissed",ON_SERVICE_QUALIFIED:"onExposureQualified",ON_C2C_READY:"onC2CReadyForSDK",ON_C2C_DISPLAYED:"onC2CDisplayed",ON_C2C_STATE_CHANGED:"onC2CStateChanged",ON_C2C_CLICKED:"onC2CClicked",ON_CHAT_REQUESTED:"onChatRequested",ON_CHAT_LAUNCHED:"onChatLaunched",ON_CHAT_SHOWN:"onChatShown",ON_CHAT_CLOSED:"onChatClosed",ON_AGENT_MSG:"onAgentMsg",ON_CUSTOMER_MSG:"onCustomerMsg",ON_AGENT_ASSIGNED:"onAgentAssigned",ON_CHAT_ENGAGED_EVENT:"onChatEngagedEvent",ON_CHAT_EVENT:"onChatEvent",ON_BEFORE_CHAT_CLOSED_EVENT:"onBeforeChatClosed",ON_AGENT_DATAPASS:"onAgentDataPass",ON_RECEIVE_VA_DATAPASS:"onReceiveVADataPass",ON_CHAT_ROOM_READY:"onChatroomReady",ON_QUEUE_MESSAGE:"onQeueMsg",ON_ANY_EVENT:"onAnyEvent",ON_TRANSCRIPT_RCV_EVENT:"onTranscriptReceived",ON_FRAMEWORK_READY_EVENT:"onFrameworkReady"},x.WindowPosition={LOWER_RIGHT:"LOWER_RIGHT",LOWER_LEFT:"LOWER_LEFT",LOWER_CENTER:"LOWER_CENTER",UPPER_CENTER:"UPPER_CENTER",UPPER_LEFT:"UPPER_LEFT",UPPER_RIGHT:"UPPER_RIGHT",CENTER_LEFT:"CENTER_LEFT",CENTER_RIGHT:"CENTER_RIGHT",CENTER:"CENTER"},U.prototype.toJSON=function(){return{command:this.command,info:this.info,brData:this.brData}},U.prototype.setCallback=function(t,e){this.cb=t,this.clear=void 0===e||e},I.prototype.setBRPosition=function(t,e,i,n){this.r=t,this.b=e,this.width=i,this.height=n},I.prototype.isXYAxisPos=function(){return 0<=this.x&&0<=this.y},I.prototype.toJSON=function(){return{x:this.x,y:this.y,r:this.r,b:this.b,width:this.width,height:this.height}},k.prototype.addCssText=function(t){this.div.style=t},k.prototype.setStyle=function(t,e){this.div.style[t]=e},k.prototype.setInnerHTML=function(t){this.div.innerHTML=t},k.prototype.appendToParent=function(t){t.appendChild(this.div)},k.prototype.setAttribute=function(t,e){this.div.setAttribute(t,e)},k.prototype.delete=function(){this.div.parentElement.removeChild(this.div)},W.prototype.setWindowActive=function(){window.top.document.hidden||H(new U("ACTIVE_WINDOW"))},W.prototype.removeListener=function(){top.window.removeEventListener("focus",this.setWindowActive),top.window.document.removeEventListener("visibilitychange",this.setWindowActive)};function J(t){function e(){setTimeout(function(){!0===i._options.checkOnLoad&&(!0===i._options.debug&&i._log("onload->eventCallback","A check loading is launched"),null===i._var.bait&&i._createBait(),setTimeout(function(){i.check()},1))},1)}this._options={checkOnLoad:!1,resetOnEnd:!1,loopCheckTime:1e3,loopMaxNumber:3600,baitClass:"pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links",baitStyle:"width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;",debug:!1},this._var={version:"3.2.1",bait:null,checking:!1,loop:null,loopNumber:0,event:{detected:[],notDetected:[]}},void 0!==t&&this.setOption(t);var i=this;void 0!==window.addEventListener?window.addEventListener("load",e,!1):window.attachEvent("onload",e)}function $(t){this.frameEl=t,this.firstPCFrames={}}function tt(){this.c2cs=[]}function et(t){this.c2cData=t,this.listeners=[]}function it(){}function nt(){this.iframe=document.getElementById(x.frameID),this.area=null,this.resizeHandler=t(this.resizeEvent.bind(this),100),z()&&(this.scrollHandler=t(this.scrollDebouncedEvent.bind(this),100),this.moveScrollHandler=this.touchMoveScrollHandler.bind(this),this.iphoneModel=function(){var t=document.createElement("canvas"),e="";if(t){var i=t.getContext("webgl")||t.getContext("experimental-webgl");if(i){var n=i.getExtension("WEBGL_debug_renderer_info");n&&(e=i.getParameter(n.UNMASKED_RENDERER_WEBGL))}}if(window.parent.screen.height/window.parent.screen.width==896/414&&3==window.devicePixelRatio)switch(e){case"Apple A12 GPU":result="iPhoneXSMax";break;default:result="iPhoneXSMax"}else if(window.parent.screen.height/window.parent.screen.width==896/414&&2==window.devicePixelRatio)switch(e){case"Apple A12 GPU":result="iPhoneXR";break;default:result="iPhoneXR"}else if(window.parent.screen.height/window.parent.screen.width==812/375&&3==window.devicePixelRatio)switch(e){case"Apple A12 GPU":result="iPhoneXS_XSMaxZoomed";break;case"Apple A11 GPU":result="iPhoneX";break;default:result="iPhoneX"}else if(window.parent.screen.height/window.parent.screen.width==812/375&&2==window.devicePixelRatio)switch(e){case"Apple A12 GPU":result="iPhoneXRZoomed";break;default:result="iPhoneXRZoomed"}else if(window.parent.screen.height/window.parent.screen.width==736/414&&3==window.devicePixelRatio)switch(e){case"Apple A8 GPU":result="iPhone6Plus";break;case"Apple A9 GPU":result="iPhone6sPlus";break;case"Apple A10 GPU":result="iPhone7Plus";break;case"Apple A11 GPU":result="iPhone8Plus";break;default:result="iPhone6Plus"}else if(window.parent.screen.height/window.parent.screen.width==667/375&&3==window.devicePixelRatio)switch(e){case"Apple A8 GPU":result="iPhone6PlusZoomed";break;case"Apple A9 GPU":result="iPhone6sPlusZoomed";break;case"Apple A10 GPU":result="iPhone7PlusZoomed";break;case"Apple A11 GPU":result="iPhone8PlusZoomed";break;default:result="iPhone6PlusZoomed"}else if(window.parent.screen.height/window.parent.screen.width==667/375&&2==window.devicePixelRatio)switch(e){case"Apple A8 GPU":result="iPhone6";break;case"Apple A9 GPU":result="iPhone6s";break;case"Apple A10 GPU":result="iPhone7";break;case"Apple A11 GPU":result="iPhone8";break;default:result="iPhone6"}else if(window.parent.screen.height/window.parent.screen.width==1.775&&2==window.devicePixelRatio)switch(e){case"PowerVR SGX 543":result="iPhone5";break;case"Apple A7 GPU":result="iPhone5s";break;case"Apple A8 GPU":result="iPhone6Zoomed";break;case"Apple A9 GPU":result="iPhone6sZoomed";break;case"Apple A10 GPU":result="iPhone7Zoomed";break;case"Apple A11 GPU":result="iPhone8Zoomed";break;default:result="iPhone6Zoomed"}else result="Not an iPhone";return result}()),nt.bottomDelta=0,m&&null!=a&&a.isCloseBtnDisplayed()&&(nt.bottomDelta+=a.getHeight()),this.chatActive=!1,this.chatframe=this.iframe.querySelector("iframe")}J.prototype._options=null,J.prototype._var=null,J.prototype._bait=null,J.prototype._log=function(t,e){B("[BlockingDetector]["+t+"] "+e)},J.prototype.setOption=function(t,e){if(void 0!==e){var i=t;(t={})[i]=e}for(var n in t)this._options[n]=t[n],!0===this._options.debug&&this._log("setOption",'The option "'+n+'" he was assigned to "'+t[n]+'"');return this},J.prototype._createBait=function(){var t=document.createElement("div");t.setAttribute("class",this._options.baitClass),t.setAttribute("style",this._options.baitStyle),this._var.bait=window.document.body.appendChild(t),!0===this._options.debug&&this._log("_createBait","Bait has been created")},J.prototype._destroyBait=function(){window.document.body.removeChild(this._var.bait),!(this._var.bait=null)===this._options.debug&&this._log("_destroyBait","Bait has been removed")},J.prototype.check=function(t){if(void 0===t&&(t=!0),!0===this._options.debug&&this._log("check","An audit was requested "+(!0===t?"with a":"without")+" loop"),!0===this._var.checking)return!0===this._options.debug&&this._log("check","A check was canceled because there is already an ongoing"),!1;this._var.checking=!0,null===this._var.bait&&this._createBait();var e=this;return!(this._var.loopNumber=0)===t&&(this._var.loop=setInterval(function(){e._checkBait(t)},this._options.loopCheckTime)),setTimeout(function(){e._checkBait(t)},1),!0===this._options.debug&&this._log("check","A check is in progress ..."),!0},J.prototype._checkBait=function(t){var e=!1;if(null===this._var.bait&&this._createBait(),null===window.document.body.getAttribute("abp")&&null!==this._var.bait.offsetParent&&0!=this._var.bait.offsetHeight&&0!=this._var.bait.offsetLeft&&0!=this._var.bait.offsetTop&&0!=this._var.bait.offsetWidth&&0!=this._var.bait.clientHeight&&0!=this._var.bait.clientWidth||(e=!0),void 0!==window.getComputedStyle){var i=window.getComputedStyle(this._var.bait,null);!i||"none"!=i.getPropertyValue("display")&&"hidden"!=i.getPropertyValue("visibility")||(e=!0)}!0===this._options.debug&&this._log("_checkBait","A check ("+(this._var.loopNumber+1)+"/"+this._options.loopMaxNumber+" ~"+(1+this._var.loopNumber*this._options.loopCheckTime)+"ms) was conducted and detection is "+(!0===e?"positive":"negative")),!0===t&&(this._var.loopNumber++,this._var.loopNumber>=this._options.loopMaxNumber&&this._stopLoop()),!0===e?(this._stopLoop(),this._destroyBait(),this.emitEvent(!0),!0===t&&(this._var.checking=!1)):null!==this._var.loop&&!1!==t||(this._destroyBait(),this.emitEvent(!1),!0===t&&(this._var.checking=!1))},J.prototype._stopLoop=function(t){clearInterval(this._var.loop),this._var.loop=null,!(this._var.loopNumber=0)===this._options.debug&&this._log("_stopLoop","A loop has been stopped")},J.prototype.emitEvent=function(t){!0===this._options.debug&&this._log("emitEvent","An event with a "+(!0===t?"positive":"negative")+" detection was called");var e=this._var.event[!0===t?"detected":"notDetected"];for(var i in e)!0===this._options.debug&&this._log("emitEvent","Call function "+(parseInt(i)+1)+"/"+e.length),e.hasOwnProperty(i)&&e[i]();return!0===this._options.resetOnEnd&&this.clearEvent(),this},J.prototype.clearEvent=function(){this._var.event.detected=[],this._var.event.notDetected=[],!0===this._options.debug&&this._log("clearEvent","The event list has been cleared")},J.prototype.on=function(t,e){return this._var.event[!0===t?"detected":"notDetected"].push(e),!0===this._options.debug&&this._log("on",'A type of event "'+(!0===t?"detected":"notDetected")+'" was added'),this},J.prototype.onDetected=function(t){return this.on(!0,t)},J.prototype.onNotDetected=function(t){return this.on(!1,t)},void 0===i&&(i=new J({checkOnLoad:!0,resetOnEnd:!0})),$.prototype.receiveMessage=function(t){var i;N&&N("RECEIVED",t.data);try{if(this.firstPCFrames[t.origin]){var e={cmd:t.data,origin:t.origin};return void this.sendMessage(new U("IPC_COOKIE_DATA",e))}i=JSON.parse(t.data)}catch(t){B("failed to parse json")}if(this.verifyMessage(i)){switch(i.command){case"CHAT_EVENT":R&&R[i.info.name]&&R[i.info.name].forEach(function(t){t(i.info.data)});break;case"CALL_OUT_FUNC":X(i.info.name,i.info.params);break;case"PERSISTENT_URL_ACTION":var n;lt.c2cs.forEach(function(t){t.c2cData.c2cIdx==i.info.c2cIdx&&(n=t)});var o=tt.getPersistentWindow(n);if(o&&(o.close(),o=null),!o&&(tt.earlyPopout&&!tt.earlyPopout.closed||tt.earlyPopoutChat(i.info.theme),tt.earlyPopout))try{tt.earlyPopout.location.href=x.tagServerUrl+i.info.src+"?UUID="+x.vendorUUID+"&siteID="+x.siteID,n.popoutWindow=tt.earlyPopout,tt.earlyPopout=null}catch(t){tt.earlyPopout=null}break;case"PERSISTENT_WINDOW_CLOSE":tt.earlyPopout?(tt.earlyPopout.close(),tt.earlyPopout=null):lt.c2cs.forEach(function(t){t.popoutWindow&&t.popoutWindow.close()});break;case"EXECUTE_AND_RETURN_FUNC":var s=i.info.name,r=X(s,i.info.params);if(r){var a={};a[s]=r,NuanMessaging.SDKAPI.publishNewPageData(a)}break;case"FETCH_PAGE_DATA":var l=i.info||[];if(0<l.length){var d={};l.forEach(function(t){var i=String(t).split("."),n=window,o=d;i.every(function(t,e){return e===i.length-1?(n[t]&&(o[t]=n[t]),!0):!!(n=n[t])&&(o=o[t]={},!0)})}),0<Object.keys(d).length&&NuanMessaging.SDKAPI.publishNewPageData(d)}break;case"FETCH_DOM_DATA":var h=i.info||[];if(0<h.length){var c={};h.forEach(function(t){var e=document.querySelector(t);if(e){var i=e.value?e.value:e.textContent?e.textContent:e.innerText;i&&(c[t]=i)}}),0<Object.keys(c).length&&NuanMessaging.SDKAPI.publishNewPageData(c)}break;case"REGISTER_DOM_EVENT":if(i.info.eventData){var u=[],p=i.info.eventData,f=p.domElements;if(p.domElementId){var m=document.getElementById(p.domElementId);m&&(u[0]=m)}if(f.forEach(function(t){if(t.elementId){var e=document.getElementById(t.elementId);e&&(u[0]=e)}else if(t.className)u.push(document.getElementsByClassName(t.className));else if(t.elementName)u.append(document.getElementsByName(t.elementName));else if(t.tagName)u.push(document.getElementsByTagName(t.tagName));else if(t.funcName){var i=X(t.funcName);i&&Array.isArray(i)&&u.push(i)}}),0<u.length){function g(t){var e=p.hoverTime?p.hoverTime:15e3;E=window.setTimeout(function(){H(new U("EVENT_GENERATED",{ruleId:i.info.ruleId,evtObj:t,evtData:p}))},e)}function w(t){window.clearTimeout(E)}function v(t){H(new U("EVENT_GENERATED",{ruleId:i.info.ruleId,evtObj:t,evtData:p}))}for(var E,y=0;y<u.length;y++){var C=u[y];C&&("mouseover"==p.id?(G(C,"mouseover",g),G(C,"mouseout",w)):G(C,p.id,v))}}}break;case"POSITION_IFRAME":S=i.info.deviceType,(L=L||new nt).render(i.info);break;case"MINIMIZE_WINDOW":L&&L.minimize(),lt&&lt.renderState(lt.IMAGETYPES.minimized,{launchable:!0}),window.NuanMessaging.SDKAPI.fireCustomEvent("onChatMinimized");break;case"DEEPLINK_COMMAND":var b=i.info.url,T=i.info.target;if(b&&(b.startsWith("http")||b.startsWith("mailto")||b.startsWith("tel"))&&!b.includes("##")&&T)if("_self"==T)top.document.location.href=b;else{null==window.top.open(b,T,"top=0;left=0")&&window.top.open(b,T)}else if(b&&b.includes("##")&&window.WF_NUANCE&&"function"==typeof window.WF_NUANCE.handleNavigation){b=b.split("##").pop();try{b=(b=decodeURIComponent(b)).replace(/'/g,'"');var _=JSON.parse(b);"object"==typeof _&&(_.identifier&&!_.identifer?_.identifer=_.identifier:_.identifer&&!_.identifier&&(_.identifier=_.identifer),NuanMessaging.SDKAPI.publishNewPageData({NUANCE_MISC:{DEEP_LINK:_.identifier}}),NuanMessaging.SDKAPI.fireCustomEvent("deepLinkClicked",_),window.WF_NUANCE.handleNavigation(_))}catch(t){}}break;case"NEW_MSG_ON_MINIMIZED":M+=1,lt.messageOnMinimized(i.info);break;case"VIRTUAL_KEYBOARD_OPEN":L&&L.virtualKeyboardDisplayed();break;case"VIRTUAL_KEYBOARD_HIDDEN":L&&L.virtualKeyboardHidden();break;case"1_PC_CREATE":var D=i.info,A=this.createHiddenIFrame(D.iframeId,0,0,1,1,D.src);A.setAttribute("sandbox","allow-same-origin allow-scripts"),A.addEventListener("load",function(){var t={key:D.key};this.sendMessage(new U("IPC_FRAME_LOADED",t))}.bind(this),!1),this.firstPCFrames[D.key]=A,window.document.getElementById("nuanChatStage").appendChild(A);break;case"1_PC_MESSAGE":var I=this.firstPCFrames[i.info.origin];if(I){var P=I.contentWindow;P&&P.postMessage(i.info.requestData,i.info.origin)}break;default:this.fireCallbackQueue(O,i)}t.stopImmediatePropagation()}else B("Failed to verify the UUID")},$.prototype.createHiddenIFrame=function(t,e,i,n,o,s){try{var r=document.createElement("iframe");return r.style.position="absolute",r.style.width=n||0,r.style.height=o||0,r.style.left=e?e+"px":0,r.style.top=i?i+"px":0,r.style.zIndex=99,r.style.display="none",r.style.overflow="hidden",r.style.padding=0,r.style.margin=0,r.id=t,r.name=t,s&&(r.src=s),r}catch(t){this.debug("Could not create iFrame element.")}return null},$.prototype.fireCallbackQueue=function(t,i){var n=-1;t.every(function(t,e){return t.command!=i.command||(t.cb&&t.cb(i.info),t.clear&&(n=e),!1)}),-1!=n&&t.splice(n,1)},$.prototype.sendMessage=function(t){N&&N("POST",t),this.frameEl.contentWindow.postMessage(JSON.stringify(t),x.tagServerUrl)},$.prototype.verifyMessage=function(t){return!(!t||t.UUID!=u.vendorUUID)},tt.lastusedC2CId=null,tt.c2cBtnId=null,tt.prototype.render=function(t){var e;(g||t.minimized&&t.minimized.state)&&(t.image=this.IMAGETYPES.minimized,t.count=t.minimized&&t.minimized.count?t.minimized.count:M,t.launchable=!0),!m||t.c2cTheme&&t.c2cTheme.renderAsHTML?(g||t.minimized&&t.minimized.state)&&a?a.isDisplayed()||a.renderC2CButton(t):(e=new et(t)).renderC2CButton(t)&&this.c2cs.push(e):a&&!a.isDisplayed()&&((e=a).renderC2CButton(t),this.c2cs.push(a)),t.isPersistentChat&&"chatactive"==t.displayState&&(e.popoutWindow=tt.getPersistentWindow(e,"chatactive"))},tt.prototype.messageOnMinimized=function(e){!m&&a&&a.isDisplayed()?a.newMinimizedMessage(M,e):this.c2cs.forEach(function(t){t.newMinimizedMessage(M,e)})},tt.prototype.clear=function(){this.c2cs.forEach(function(t){t.clearListeners(),t.clear()}),this.c2cs=[],tt.earlyPopout=null,M=0,g=!1},tt.prototype.setDisabled=function(t){this.c2cs.forEach(function(t){t.showDisabled()}),!m&&a&&a.isDisplayed()&&(a.clearListeners(),a.clear())},tt.prototype.renderState=function(e,i){m||a?a&&a.isDisplayed()&&e!=this.IMAGETYPES.chatactive?a.renderState(e,i):e!=this.IMAGETYPES.minimized||m||(i.image=this.IMAGETYPES.minimized,a.renderC2CButton(i)):this.c2cs.forEach(function(t){t.c2cData.c2cIdx==i.c2cIdx&&t.showIcon(e,i.launchable,t.c2cData,t.div,i.chatVisible)})},tt.prototype.c2cCallbackHandler=function(t,e){!m&&e&&"disabled"==e.state?this.setDisabled():t&&t(e)},tt.prototype.IMAGETYPES={disabled:"d",chatactive:"d",busy:"b",afterHours:"ah",ready:"r",minimized:"m"},et.prototype.renderC2CButton=function(t){var e=this.getDiv(t.pageElementID),i=this.div=e;return!this.isDivOccupied(e)&&(null!=i&&void 0!==t.lang&&e.setAttribute("lang",t.lang),t.adaCompliant&&e.setAttribute("aria-live","polite"),e.occupied=!0,e.idx=t.c2cIdx,t.abs&&(e.style.position="absolute",e.style.top=t.abs.y,e.style.left=t.abs.x),this.showIcon(t.image,t.launchable,t,e,!1),!0)},et.prototype.showIcon=function(t,e,i,n,o){i.c2cTheme.renderAsHTML?this.showTextButton(t,e,i,n):this.showImg(t,e,i,n,o),this.fixC2CLocation(n),this.updateContainerStyle(n)},et.prototype.showTextButton=function(t,e,i,n){var o=i.c2cTheme[t];n.innerHTML="<div "+(z()?' tabindex="0"':"")+">"+o+"</div>",e&&this.addEventHandlers(n,i.c2cIdx,"onclick",i,t),i.reDisplay&&(n.setAttribute("tabindex","0"),n.focus())},et.prototype.newMinimizedMessage=function(t){},et.prototype.showImg=function(t,e,i,n,o){var s=i.c2cTheme[t+"alt"];void 0!==s&&null!=s&&""!==s||(s="Click To Chat");var r=z()?"ontouchstart":"onclick",a=e?' alt="'+s+'" tabindex="0"':'alt="'+s+'"';if((i.c2p||i.adaCompliant)&&e?n.innerHTML='<input type="image" role="button" src="'+i.mediaURL+"/images/"+i.c2cTheme[t]+'"'+a+(i.adaCompliant?' style="cursor:default" ':"")+"/>":n.innerHTML='<img src="'+i.mediaURL+"/images/"+i.c2cTheme[t]+'"'+a+' style="cursor:default" '+(o?'aria-hidden="true" tabindex="-1"':"")+"/>",e&&this.addEventHandlers(n,i.c2cIdx,r,i,t),!0===i.reDisplay&&(!tt.lastusedC2CId&&null==tt.c2cBtnId&&0===n.idx||!tt.lastusedC2CId&&null!=tt.c2cBtnId&&tt.c2cBtnId==n.idx||tt.lastusedC2CId&&tt.lastusedC2CId===n.id)){var l=document.getElementById(n.id),d=!!i.ignorePageScrollingOnC2CFocus;("Phone"==i.deviceType||"Tablet"==i.deviceType||"fixed"===l.style.position||d||function(t){if(t){var e=t.getBoundingClientRect(),i=window.top.innerHeight,n=window.top.innerWidth;return 0<=e.top&&0<=e.left&&e.bottom<=i&&e.right<=n}}(l))&&window.setTimeout(function(){if(l&&l.firstChild){var t=et.getControlElement(l.firstChild);t&&(t.hasAttribute("tabindex")||t.setAttribute("tabindex",0),t.focus())}tt.lastusedC2CId=null},300)}else i.launchable&&!i.c2cTheme.renderAsHTML&&(tt.c2cBtnId=this.idx)},et.getControlElement=function(t){return"div"===t.tagName.toLowerCase()?et.getControlElement(t.firstElementChild):"style"===t.tagName.toLowerCase()?et.getControlElement(t.nextElementSibling):t},et.prototype.addVirtualListener=function(){F(et.VirtualKeyboardOpenCloseHandler)||et.VirtualKeyboardOpenCloseHandler.addListener(this.c2cData)},et.prototype.fixC2CLocation=function(t){var e,i,n,o,s,r="Tablet"===this.c2cData.deviceType,a="Android"===Z();r&&a&&(e=getComputedStyle(t),i=parseInt(e.left)+parseInt(e.width)+parseInt(e.right),n=window.innerWidth,!isNaN(i)&&n<i&&""===(o=window.document.documentElement).style.zoom&&(s=n/i*100,o.style.zoom=s+"%"))},et.prototype.updateContainerStyle=function(t){var e=t,i=e?e.children[0]:null;if(i){var n=i.getAttribute("data-parent-style");if((i.children[0]&&null==n||""==n)&&(n=i.children[0].getAttribute("data-parent-style")),null!=n&&""!=n&&(this.parentPositionStyle=this.parseStyle(n),this.applyStyle(e,this.parentPositionStyle),"Android"==Z()&&n.contains("position")&&n.contains("fixed")))if(Q())null!=this.parentPositionStyle.bottom&&null==this.parentPositionStyle.top&&(this.updateIconPosition(t),this.addListener(window.top,"scroll",this.updateIconPositionAfterDelay.bind(this))),this.addListener(window.top,"orientationchange",this.updateIconPositionToInitial.bind(this,eDiv));else if((0<=window.navigator.userAgent.indexOf("Chrome")||0<=window.navigator.userAgent.indexOf("CriOS"))&&!Q()){if(this.isChangePositionNeeded()){var o=e.getElementsByTagName("img")[0],s=e.getElementsByTagName("input")[0];if(!o&&s&&"image"==s.type&&(o=s),o&&!o.complete){var r=o.onload;o.onload=function(){"function"==typeof r&&r(),this.updateIconPosition()}.bind(this)}else this.updateIconPosition()}this.addListener(window.top,"orientationchange",this.updateIconPositionAfterDelay.bind(this))}}},et.prototype.isChangePositionNeeded=function(){var t=top.document.documentElement,e=t.scrollWidth/t.scrollHeight;return screen.width/screen.height<e},et.prototype.updateIconPositionToInitial=function(t){this.applyStyle(t,this.parentPositionStyle),this.positionChanged=!1,this.updateIconPositionAfterDelay()},et.prototype.updateIconPositionAfterDelay=function(){setTimeout(function(){this.updateIconPosition()}.bind(this),500)},et.prototype.parseStyle=function(t){for(var e,i={},n=t.split(";"),o=0;o<n.length;o++)(e=n[o].split(":"))[0]&&(i[e[0].trim()]=e[1]?e[1].trim():"");return i},et.prototype.applyStyle=function(t,e){var i={stylesMap:{},appliedProperty:[],addProperty:function(t){this.appliedProperty.push(t)},clearExcessivePropertyValue:function(t){for(var e=0;e<this.appliedProperty.length;e++)switch(this.appliedProperty[e]){case"top":-1==this.appliedProperty.indexOf("bottom")&&(t.style.bottom="");break;case"bottom":-1==this.appliedProperty.indexOf("top")&&(t.style.top="");break;case"left":-1==this.appliedProperty.indexOf("right")&&(t.style.right="");break;case"right":-1==this.appliedProperty.indexOf("left")&&(t.style.left="")}}};for(var n in"string"==typeof e&&(e=this.parseStyle(e)),i.stylesMap=e)t.style[n]=e[n],i.addProperty(n);i.clearExcessivePropertyValue(t)},et.prototype.addEventHandlers=function(e,i,n,o,t){function s(){if(S=o.deviceType,o.isPersistentChat){var t=o.chatTheme;tt.earlyPopoutChat(t)}return o.image==lt.IMAGETYPES.minimized?NuanMessaging.SDKAPI.onRestoredClicked():NuanMessaging.CIAPI.onC2CClicked(i),!1}function r(t){var e=(t=t||window.event).target||t.srcElement;3==e.nodeType&&(e=e.parentNode),e.style.cursor="pointer"}window.setTimeout(function(){var t=e.firstChild;t&&(t[n]=s,t.onmouseover=r)},300)},et.prototype.updateIconPosition=function(t){var e,i=t,n=function(t){var e={};for(var i in t)e[i]=t[i];return e}(this.parentPositionStyle),o=!1,s=!1;if(Q())window.top.pageYOffset<=0?a(0)&&(e=l(0),s=!0):this.positionChanged&&(o=!0);else if(this.isChangePositionNeeded()){if(this.positionChanged)a(0)&&(e=l(0),s=!0);else if(null!=n.bottom&&null==n.top){var r=parseInt(n.bottom);isNaN(r)||a(r)&&(e=l(r),s=!0)}}else this.positionChanged&&(o=!0);function a(t){return i.getBoundingClientRect().bottom+t>window.top.document.documentElement.scrollHeight}function l(t){return window.top.document.documentElement.scrollHeight-i.offsetHeight-t}s?(n.top=e+"px",delete n.bottom,this.applyStyle(i,n),this.positionChanged=!0):o&&(this.applyStyle(i,this.parentPositionStyle),this.positionChanged=!1)},et.prototype.getDiv=function(t){return window.document.getElementById(t)},et.prototype.isDivOccupied=function(t){return!t||!!t.occupied},et.prototype.showDisabled=function(){this.div&&this.showIcon(lt.IMAGETYPES.disabled,!1,this.c2cData,this.div,!0)},et.prototype.addListener=function(t,e,i){Y(t,e,i),this.listeners.push({target:t,type:e,listener:i})},et.prototype.clearListeners=function(){for(var t=this.listeners.length;t--;)V(this.listeners[t].target,this.listeners[t].type,this.listeners[t].listener)},et.prototype.clear=function(){this.div&&(this.div.occupied=!1,this.div.innerHTML="")},tt.earlyPopoutChat=function(t){var e=null,i="toolbar=no,location=no,menubar=no,status=no,scrollbars=no,top="+t.py+",left="+t.px+",width="+(x.frameW?x.frameW:t.pw)+",height="+(x.frameH?x.frameW:t.ph)+",resizable=1";try{if("Android"==Z()||"iOS"==Z())return;e=top.open("","_inqPersistentChat",i)}catch(t){e=null}tt.earlyPopout=e},tt.getPersistentWindow=function(t,e){if("_inqPersistentChat"==window.parent.name)return!0;var i=null;try{if(t.popoutWindow&&t.popoutWindow.closed)return t.popoutWindow=null;if("chatactive"!=e&&!t.popoutWindow)return null;if(tt.earlyPopout)return null;null!=(i=window.open("","_inqPersistentChat","toolbar=no,location=no,menubar=no,status=no,scrollbars=no,top=-500,left=-500,width=0,height=0"))&&(i==top||i==self?i=null:i.postMessage(JSON.stringify(new U("SET_PER_WIN")),"*")),t.popoutWindow=i}catch(t){i=null}return i},et.VirtualKeyboardOpenCloseHandler={addListener:function(t){if("Phone"===t.deviceType&&!z()){var o=t.pageElementID;this.c2cHandler=function(){var t=document.getElementById(o);if(!F(t)){var e=window.top.screen.width/window.top.innerWidth,i=window.top.innerHeight*e,n=window.top.screen.height;t.style.display=200<n-i?"none":"block"}},window.removeEventListener("resize",this.c2cHandler),window.addEventListener("resize",this.c2cHandler)}},removeListener:function(t){"Phone"!==t.deviceType||z()||window.removeEventListener("resize",this.c2cHandler)}},it.getScrollLeft=function(){try{var t=window.parent,e=t.document;return null!=t.pageXOffset?t.pageXOffset:null!=e.documentElement&&null!=e.documentElement.scrollLeft&&0!=e.documentElement.scrollLeft?e.documentElement.scrollLeft:e.body.scrollLeft}catch(t){}return 0},it.getScrollTop=function(){try{var t=window.parent,e=t.document;return null!=t.pageYOffset?t.pageYOffset:null!=e.documentElement&&null!=e.documentElement.scrollTop&&0!=e.documentElement.scrollTop?e.documentElement.scrollTop:e.body.scrollTop}catch(t){}return 0},it.getScrollWidth=function(){var t=window.parent,e=t.document,i=0;if(null==t.innerWidth)i=null!=e.documentElement&&0!=e.documentElement.clientWidth?e.documentElement.clientWidth:e.body.clientWidth;else{var n=t.innerWidth;n-=it.hasRightScrollBar()?it.getScrollBarWidth():0;var o=e.body.clientWidth;0==(i=K()||0==o?n:Math.min(o,n))&&(i=e.body.clientWidth)}return i},it.getScrollHeight=function(){var t=0,e=window.parent.document;if(null==window.parent.innerHeight)t=null!=e.documentElement&&0!=e.documentElement.clientHeight?e.documentElement.clientHeight:e.body.clientHeight;else{var i=window.parent.innerHeight;i-=it.hasBottomScrollBar()?it.getScrollBarWidth():0;var n=e.body.clientHeight,o=e.body.scrollHeight;(t=0)==(t=0==n||n<=o?i:Math.min(n,i))&&(t=e.body.clientHeight)}return t},it.hasRightScrollBar=function(){var t=window.parent.document.documentElement.clientHeight,e=window.parent.document.documentElement.clientWidth,i=window.parent.document.documentElement.scrollHeight,n=window.parent.innerWidth;return t<i||e<n},it.hasBottomScrollBar=function(){var t=window.parent.document.documentElement.clientWidth,e=window.parent.document.documentElement.scrollWidth,i=window.parent.document.documentElement.clientHeight,n=window.parent.innerHeight;return t<e||i<n},it.getScrollBarWidth=function(){var t,e,i,n;return(t=window.parent.document.createElement("div")).style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.width="100px",t.style.height="50px",t.style.overflow="hidden",(e=window.parent.document.createElement("div")).style.width="100%",e.style.height="200px",t.appendChild(e),window.parent.document.body.appendChild(t),i=e.offsetWidth,t.style.overflow="auto",n=e.offsetWidth,window.parent.document.body.removeChild(window.parent.document.body.lastChild),i-n},it.getViewport=function(){return new I(it.getScrollLeft(),it.getScrollTop(),parseInt(window.parent.innerWidth),parseInt(window.parent.innerHeight))},nt.prototype.render=function(t){window.parent;var e=it.getViewport();if(this.theme=t,!g&&t.minimized&&t.minimized.state)return this.chatActive=!0,j()?this.resizeForPhone(e):(this.setDesktopArea(),this.setWH()),g=!0,M=t.minimized.count,t.reDisplay=!0,lt.render(t),this.setVisible(!1),void(this.chatframe.style.display="block");j()?(z()?(this.addViewPort(),V(window,"scroll",this.scrollHandler),Y(window,"scroll",this.scrollHandler),document.body.classList.add("chatopen"),window.scrollTo(0,1)):document.documentElement.style.overflow="hidden",e.width,e.height,window.requestAnimationFrame(function(){this.resizeForPhone(e),this.addAriaToParent()}.bind(this))):(this.setDesktopArea(),window.requestAnimationFrame(function(){this.setWH(),this.resizeWindow(),this.resizeEvent()}.bind(this))),V(window,"resize",this.resizeHandler),Y(window,"resize",this.resizeHandler),this.chatframe.removeAttribute("aria-hidden"),this.chatframe.removeAttribute("hidden"),this.chatframe.style.display="",this.addDragElement(t),this.chatActive=!0},nt.prototype.setDesktopArea=function(){this.area=new I,this.area.width=x.frameW?x.frameW:this.theme.skinWidth,this.area.height=(x.frameH?x.frameH:this.theme.skinHeight+this.theme.titleBarHeight)+nt.bottomDelta},nt.prototype.resizeForPhone=function(){if(!this.isMinimized()&&this.chatActive){var t=it.getViewport();this.area,this.area=new I(0,0,t.width,t.height),this.setWH(),this.updatePosition()}},nt.prototype.addViewPort=function(){this.metaTag=document.createElement("meta"),this.metaTag.name="viewport",this.metaTag.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0",document.getElementsByTagName("head")[0].appendChild(this.metaTag)},nt.prototype.scrollDebouncedEvent=function(){if(1==this.scrollState)return this.scrollState=0,this.forceScrollTimer&&clearTimeout(this.forceScrollTimer),void setTimeout(function(){this.isVirtualKeyboardPresent=!0,window.scrollTo(0,0),setTimeout(function(){2==this.scrollState&&this.scrollDebouncedEvent()}.bind(this),250),this.scrollState=2}.bind(this),200);if(1==this.isVirtualKeyboardPresent){this.scrollState=0;var t,e=it.getViewport(),i=this.iframe.querySelector("iframe");t=visualViewport?e.height-function(){if(visualViewport){var t=visualViewport.height*visualViewport.scale;return Math.round(t)}return 0}():e.height>e.width?this.area.height*(nt.keyBoardValuePort[this.iphoneModel]||.43):.6*this.area.height,this.iframe.style.height=null,this.iframe.style.bottom=t+"px";var n=getComputedStyle(this.iframe),o=parseInt(e.height,10),s=parseInt(n.paddingTop,10)+parseInt(n.paddingBottom,10);i.style.height=o-t-s+"px",this.reLayout(),this.scrolled=window.top.pageYOffset,0==t?(this.scrollState=1,this.isVirtualKeyboardPresent=!1):(V(window,"scroll",this.scrollHandler),V(window,"scroll",this.moveScrollHandler),Y(window,"scroll",this.moveScrollHandler),H(new U("KEYBOARD_OPEN")))}},nt.prototype.virtualKeyboardDisplayed=function(){q()||(this.isVirtualKeyboardPresent=!1,this.iframe.style.bottom=null,V(window,"scroll",this.moveScrollHandler),V(window,"scroll",this.scrollHandler),Y(window,"scroll",this.scrollHandler),this.scrollState=1,this.forceScrollTimer=setTimeout(function(){window.scrollBy(0,10)},200))},nt.prototype.virtualKeyboardHidden=function(){q()||(this.kbHiddenTimer&&clearTimeout(this.kbHiddenTimer),this.kbHiddenTimer=setTimeout(function(){var t=it.getViewport();this.isVirtualKeyboardPresent=!1,this.iframe.style.bottom=null,this.resizeForPhone(t),this.kbHiddenTimer=null}.bind(this),250),V(window,"scroll",this.moveScrollHandler))},nt.prototype.touchMoveScrollHandler=function(t){t.preventDefault(),t.stopPropagation(),window.top.scrollTo(0,this.scrolled)},nt.prototype.resizeEvent=function(){this.timeout&&window.cancelAnimationFrame(this.timeout),this.timeout=window.requestAnimationFrame(function(){var t=it.getViewport();j()?(this.resizeForPhone(t),z()&&this.isVirtualKeyboardPresent?t.width>t.height?this.scrollDebouncedEvent():(this.scrollState=1,V(window,"scroll",this.scrollHandler),Y(window,"scroll",this.scrollHandler),this.forceScrollTimer=setTimeout(function(){window.scrollBy(0,10)},200)):z()&&setTimeout(function(){window.scrollTo(0,0)},200),H(new U("KEYBOARD_OPEN"))):(it.getScrollHeight()>parseInt(this.iframe.style.height)?(this.iframe.classList.contains("adjust-height")&&(this.iframe.classList.remove("adjust-height"),H(new U("FULL_SCREEN",!1))),this.resizeWindow(),this.area.height=parseInt(this.iframe.style.height)):(this.iframe.classList.contains("adjust-height")||(this.iframe.classList.add("adjust-height"),H(new U("FULL_SCREEN",!0))),this.area.height=it.getViewport().height),it.getScrollWidth()>parseInt(this.iframe.style.width)?(this.iframe.classList.contains("adjust-width")&&this.iframe.classList.remove("adjust-width"),this.resizeWindow(),this.area.width=parseInt(this.iframe.style.width)):(this.iframe.classList.contains("adjust-width")||this.iframe.classList.add("adjust-width"),this.area.width=it.getViewport().width))}.bind(this))},nt.prototype.setWH=function(){var t=this.iframe.querySelector("iframe"),e=getComputedStyle(this.iframe);this.iframe.style.width=this.area.width+"px",t.classList.add("enter"),t.style.width=this.area.width-(parseInt(e.paddingLeft)+parseInt(e.paddingRight))+"px",this.iframe.style.height=this.area.height+"px",j()?t.style.height=this.area.height-(parseInt(e.paddingTop)+parseInt(e.paddingBottom))+"px":t.style.height=this.area.height-nt.bottomDelta-(parseInt(e.paddingTop)+parseInt(e.paddingBottom))+"px"},nt.prototype.resizeWindow=function(){var t,e=this.area.width,i=this.area.height;-1!=this.theme.skinRightSaved&&-1!=this.theme.skinBottomSaved?((t=new P).p1=this.theme.skinRightSaved,t.p2=this.theme.skinBottomSaved):t=nt.calcChatLocation(e,i,this.theme.skinLeft,this.theme.skinTop,x.framePos?x.framePos:this.theme.skinPosition),t.p1=nt.setFixedRPosition(t.p1,e),t.p2=nt.setFixedBPosition(t.p2,i),this.area.setBRPosition(t.p1,t.p2,e,i),this.updatePosition(e,i)},nt.prototype.moveStage=function(t,e){new P,it.getViewport();var i=it.getScrollWidth()-(t+this.area.width),n=it.getScrollHeight()-(e+this.area.height);this.area.setBRPosition(i,n,this.area.width,this.area.height),H(new U("UPDATE_CHAT_POSITION",this.area)),this.updatePosition(),this.theme.skinRightSaved=i,this.theme.skinBottomSaved=n},nt.prototype.addDragElement=function(t){if(x.isDragEnabled()&&!j()){for(var e=document.getElementsByTagName("script"),i="",n=0;n<e.length;++n){if(e[n].src&&e[n].getAttribute("src").includes("nuan_websdk_bootstrap"))i=e[n].src.replace(/(js\/nuan_websdk_bootstrap).*\.js.*$/,"images/")}var o=this.titleBarEl=new k("nuanTitleBar");nt.clearImage=i+"clear.gif";var s=x.getUIConfig()&&x.getUIConfig().topBarConfig,r={};s&&(r=s.topBarSettings),o.addCssText("position:absolute; z-index: 9999999; height: 1px; width: 1px; left: 0px; top: 0px; cursor:move; borderThickness:0px"),o.setInnerHTML('<input type="image" src="'+nt.clearImage+'" style="position:static;cursor:move;" alt="" tabindex="-1"/>'),o.setStyle("height",t.adjustDragBarHeight||r.adjustDragBarHeight||t.titleBarHeight+"px"),o.setStyle("width",t.adjustDragBarWidth||r.adjustDragBarWidth||this.area.width-t.dragAreaOffset+"px"),(t.adjustDragBarLeft||r.adjustDragBarLeft)&&o.setStyle("left",t.adjustDragBarLeft||r.adjustDragBarLeft),o.appendToParent(this.iframe),st.setDragable(t.dragMode||x.getUIConfig()&&x.getUIConfig().appConfigProps.dragMode)}},nt.prototype.updatePosition=function(t,e){this.reLayout()},nt.prototype.reLayout=function(){this.area.isXYAxisPos()?(this.iframe.style.left=this.area.x+"px",this.iframe.style.top=this.area.y+"px"):(this.iframe.style.right=this.area.r+"px",this.iframe.style.bottom=this.area.b+"px",this.iframe.style.left=this.iframe.style.top=null)},nt.prototype.addAriaToParent=function(){window.WFUI_BRIDGE?(window.WFUI_BRIDGE.setNonCurrentIframeAriaHidden(!0,window.WF_NUANCE.UUID),H(new U("READY_FOCUS"))):window.WFA&&window.WFA.body&&window.WFA.body.HideTopLevelContainersFN&&window.WFA.body.HideTopLevelContainersFN()},nt.prototype.removeAriaFromParent=function(){window.WFUI_BRIDGE?window.WFUI_BRIDGE.setNonCurrentIframeAriaHidden(!1,window.WF_NUANCE.UUID):window.WFA&&window.WFA.body&&window.WFA.body.ShowTopLevelContainersFN&&window.WFA.body.ShowTopLevelContainersFN()},nt.prototype.minimize=function(){this.setVisible(!1),g=!0},nt.prototype.isMinimized=function(){return g},nt.prototype.setVisible=function(t){var e=this.iframe.querySelector("iframe");if(t)e.style.display="",this.render(this.theme),g=!1,0<M&&H(new U("KEYBOARD_OPEN")),M=0,this.addAriaToParent();else{if(V(window,"resize",this.resizeHandler),this.titleBarEl){var i=this.titleBarEl.div[ot.INSTANCE_LABEL];i&&i.clear(),this.titleBarEl.delete()}else V(window,"scroll",this.scrollHandler),V(window,"scroll",this.moveScrollHandler),z()?(this.metaTag&&this.metaTag.parentElement.removeChild(this.metaTag),document.body.classList.remove("chatopen")):document.documentElement.style.overflow="scroll";this.iframe.classList.remove("adjust-height"),this.iframe.classList.remove("adjust-width"),e.classList.remove("enter"),this.iframe.style.height="1px",this.iframe.style.width="1px",this.iframe.style.top=null,this.iframe.style.left=null,this.isVirtualKeyboardPresent=!1,this.iframe.style.bottom=null,this.kbHiddenTimer&&clearTimeout(this.kbHiddenTimer),this.removeAriaFromParent(),this.area=null,e.setAttribute("aria-hidden",!0),e.setAttribute("hidden",!0),this.chatActive=!1}},nt.prototype.clear=function(){this.setVisible(!1);var t=this.iframe.querySelector("iframe");t.style.width=null,t.style.height=null,setTimeout(function(){this.iframe.style.bottom=null,this.iframe.style.right=null,t.style.display="none"}.bind(this),500)},nt.setFixedRPosition=function(t,e){return nt.FixR(t,e)},nt.setFixedBPosition=function(t,e){return nt.FixB(t,e)},nt.FixR=function(t,e){var i=t<0?0:t,n=i+e,o=it.getScrollWidth();return o<n&&0!=i&&(i=o-e),i<0&&(i=0),i},nt.FixB=function(t,e){var i=t<0?0:t,n=it.getScrollHeight()-e;return n<i&&0!=i&&(i=n),i<0&&(i=0),i},nt.chatPositionPadding=5,nt.calcChatLocation=function(t,e,i,n,o){var s,r,a=0,l=0;it.hasRightScrollBar(),it.hasBottomScrollBar();switch("Microsoft Internet Explorer"==window.navigator.appName||-1!=window.navigator.userAgent.indexOf("Trident")?(0==(r=window.parent.document.documentElement.clientHeight)&&(r=window.parent.document.body.clientHeight),0==(s=window.parent.document.documentElement.clientWidth)&&(s=window.parent.document.body.clientWidth)):(r=window.parent.innerHeight,s=window.parent.innerWidth),t<nt.minWidth&&(t=nt.minWidth),e<nt.minHeight&&(e=nt.minHeight),o.toUpperCase()){case"UPPER CENTER":case"UPPER_CENTER":case"TOP_CENTER":l=r-e,a=s/2-t/2;break;case"UPPER_RIGHT":case"TOP_RIGHT":l=r-e,a=0;break;case"UPPER_LEFT":case"TOP_LEFT":l=r-e,a=s-t;break;case"CENTER_LEFT":l=r/2-e/2,a=s-t;break;case"CENTER_RIGHT":l=r/2-e/2,a=0;break;case"LOWER_LEFT":case"BOTTOM_LEFT":l=0,a=s-t;break;case"LOWER_CENTER":case"BOTTOM_CENTER":l=0,a=s/2-t/2;break;case"LOWER_RIGHT":case"BOTTOM_RIGHT":l=a=0;break;case"POP_UNDER_CENTER":a=s/2-t/2,l=r/2-e;break;case"ABSOLUTE":case"FIXED":case"RELATIVE":a=i,l=n;break;case"CENTER":a=s/2-t/2,l=r/2-e/2}return(null==a||a<0)&&(a=0),(null==l||top<0)&&(top=0),new P(0|a,0|l)},nt.keyBoardValuePort={iPhoneX:.45};var ot=function(){this.className="DragResize",this.styleSaved="",this.cursor="default",this.pDraggerNow=null,this.touchIdentifier=ot.TOUCH_IDENTIFER_UNUSED};ot.o=null,ot.typeof=function(t){return typeof t},ot.WhenDone=function(){null!=ot.instance&&ot.instance.whenDone(),ot.instance=null},ot.prototype._removeEventListener=function(t,e,i){V(t,e,i)},ot.prototype._attachEventListener=function(t,e,i){Y(t,e,i)},ot.prototype.bindClosures=function(){this.uponTouchStartClosure=this.uponTouchStart.bind(this),this.uponTouchCancelClosure=this.uponTouchCancel.bind(this),this.uponTouchEndClosure=this.uponTouchEnd.bind(this),this.uponTouchDragClosure=this.uponTouchDrag.bind(this),this.uponMouseDragStartClosure=this.uponDragStart.bind(this),this.uponMouseOutClosure=this.uponMouseOut.bind(this),this.uponMouseDragClosure=this.uponDrag.bind(this),this.uponMouseDropClosure=this.uponDrop.bind(this)},ot.prototype.init=function(t,e){null!=t&&(this.dragImage=this.fixDragImage(t),this.obj=t,this.frame=e.getElementsByTagName("iframe")[0],null!=t[ot.INSTANCE_LABEL]?B("o already has property for "+ot.INSTANCE_LABEL+": "+t[ot.INSTANCE_LABEL]):(t[ot.INSTANCE_LABEL]=this,(e[ot.INSTANCE_LABEL]=this).root=e&&null!=e?e:t,this.bindClosures(),this.isSupported("touchstart")&&(this.obj[ot.INSTANCE_LABEL]=this)._attachEventListener(this.dragImage,"touchstart",this.uponTouchStartClosure),this.isSupported("mousedown")&&this._attachEventListener(this.dragImage,"mousedown",this.uponMouseDragStartClosure)))},ot.prototype.fixDragImage=function(t){var e,i,n=0;if("IMG"==t.nodeName.toUpperCase()){e=t.parentNode;var o=document.createElement("DIV");return o.id=t.id,o.style.cssText="background-color:#007700; opacity:0.4; "+String(t.style.cssText),o.title=t.title,e.insertBefore(o,t),t.style.height=t.style.width="100%",t.style.position="absolute",t.style.top=t.style.left="0px",t.id=o.id+"_image",e.removeChild(t),o}if("DIV"==t.nodeName.toUpperCase()){var s=t.getElementsByTagName("IMG");if(0<s.length){var r=null;for(n=0,i=s.length;n<i;){var a=n++;if(s[a].parentNode==t){r=s[a];break}}if(null!=r&&(e=r.parentNode)==t){var l=document.createElement("INPUT");return l.type="image",null==r.src||""==r.src?l.src=nt.clearImage:l.src=r.src,l.style.cssText=String(t.style.cssText)+"; top:0px; left:0px; height: 100%; width: 100%;display:block;padding:0;margin:0;",l.className="tcChat",l.name="DragSafe",u(l),e.replaceChild(l,r),l}}var d=null,h=t.getElementsByTagName("INPUT");if(0<h.length){for(n=0,i=h.length;n<i;){var c=n++;if(h[c].parentNode==t){d=h[c];break}}null!=d&&"DragSafe"!=d.name&&(d.name="DragSafe",d.style.cssText=" cursor: move; top:0px; left:0px; height: 100%; width: 100%;display: block;padding:0;margin:0;",d.className="tcChat",u(d))}}function u(t){t.setAttribute("aria-hidden","true"),t.setAttribute("alt",""),t.setAttribute("tabindex","-1")}return t},ot.prototype.isLeftClick=function(t){var e=t||window.event,i=1;return i="Netscape"==window.navigator.appName?t.which:window.parent.event.button,0==e.type.indexOf("touch")||1==i},ot.prototype.fireDone=function(){this.whenDone()},ot.prototype.fireDoneState=function(){ot.instance=this,window.setTimeout(ot.WhenDone,1)},ot.prototype.removeTouchEvents=function(){this._attachEventListener(this.dragImage,"mousedown",this.uponMouseDragStartClosure),this._removeEventListener(ot.doc,"touchcancel",this.uponTouchCancelClosure),this._removeEventListener(ot.doc,"touchend",this.uponTouchEndClosure),this._removeEventListener(ot.doc,"touchmove",this.uponTouchDragClosure)},ot.prototype.removeMouseEvents=function(){this._attachEventListener(this.dragImage,"touchstart",this.uponTouchStartClosure),this._removeEventListener(ot.doc,"mouseout",this.uponMouseOutClosure),this._removeEventListener(ot.doc,"mousemove",this.uponMouseDragClosure),this._removeEventListener(ot.doc,"mouseup",this.uponMouseDropClosure)},ot.prototype.addTouchEvents=function(){this._removeEventListener(this.dragImage,"mousedown",this.uponMouseDragStartClosure),this._attachEventListener(ot.doc,"touchcancel",this.uponTouchCancelClosure),this._attachEventListener(ot.doc,"touchend",this.uponTouchEndClosure),this._attachEventListener(ot.doc,"touchmove",this.uponTouchDragClosure)},ot.prototype.addMouseEvents=function(){this._removeEventListener(this.obj,"touchstart",this.uponTouchStartClosure),this._attachEventListener(ot.doc,"mouseout",this.uponMouseOutClosure),this._attachEventListener(ot.doc,"mousemove",this.uponMouseDragClosure),this._attachEventListener(ot.doc,"mouseup",this.uponMouseDropClosure)},ot.prototype.removeEvents=function(){this.removeMouseEvents(),this.fireDoneState()},ot.prototype.uponTouchCancel=function(t){var e=t||window.event;return null!=e.preventDefault&&e.preventDefault(),!1},ot.prototype.uponTouchEnd=function(t){try{var e=t||window.event;if(null!=e.preventDefault&&e.preventDefault(),this.touch=this.getTouchByIdentifer(e),null==this.touch)return!1;var i={X:this.touch.pageX-this.touchOffsetX,Y:this.touch.pageY-this.touchOffsetY};this.repositionTouch(i),this.removeTouchEvents(),this.done()}catch(t){B("ERROR: uponTouchEnd: "+t)}return!1},ot.prototype.getTouchByIdentifer=function(t){try{var e=t.changedTouches;if(null==e)return null;if(this.touchIdentifier==ot.TOUCH_IDENTIFER_UNUSED)return null;if(null!=e.identifiedTouch)return e.identifiedTouch(this.touchIdentifier);for(var i=0,n=e.length;i<n;){var o=i++;if(e[o].identifier==this.touchIdentifier)return e[o]}return null}catch(t){B("ERROR: getTouchByIdentifer: "+t)}return null},ot.prototype.done=function(){this.touchIdentifier=ot.TOUCH_IDENTIFER_UNUSED,window.setTimeout(this.whenDone.bind(this),1)},ot.prototype.uponDrop=function(t){var e=t||window.event;null!=e.preventDefault&&e.preventDefault();var i=this.getPosition(e);return this.removeEvents(),this.done(),this.frame.style.pointerEvents="auto",this.reposition(i)},ot.prototype.uponMouseOut=function(t){var e=t||window.event;null!=e.preventDefault&&e.preventDefault();var i=this.getDefaultMin(),n=this.getDefaultMax(),o=this.getPosition(e),s=!1;return o.Y<i.Y&&(o.Y=i.Y,s=!0),o.X<i.X&&(o.X=i.X,s=!0),o.Y>=n.Y+this.root.offsetHeight&&(o.Y=n.Y+this.root.offsetHeight,s=!0),o.X>=n.X+this.root.offsetWidth&&(o.X=n.X+this.root.offsetWidth,s=!0),s?(this.removeEvents(),this.reposition(o),this.fireDoneState(),!(this.frame.style.pointerEvents="auto")):this.uponDrag(e)},ot.prototype.getScreenMax=function(){return{X:it.getScrollWidth()-5,Y:it.getScrollHeight()-5}},ot.prototype.repositionTouch=function(t){try{if(null!=this.pLast&&t.X==this.pLast.X&&t.Y==this.pLast.Y)return!1;var e,i;i=t.X,t.X!=this.pLast.X&&i>=this.pMin.X&&i<this.pMax.X?this.setLeft(i):i>=this.pMax.X?this.setLeft(i=this.pMax.X):i<this.pMin.X&&this.setLeft(i=this.pMin.X),e=t.Y,t.Y!=this.pLast.Y&&e>=this.pMin.Y&&e<this.pMax.Y?this.setTop(e):e>=this.pMax.Y?this.setTop(e=this.pMax.Y):e<this.pMin.Y&&this.setTop(e=this.pMin.Y),this.pDraggerNow={X:i,Y:e},this.pLast=t}catch(t){B("ERROR: repositionTouch: "+t)}return!1},ot.prototype.reposition=function(t){var e=t.Y-this.deltaY,i=t.X-this.deltaX;return i>=this.pMin.X&&i<this.pMax.X?this.pDraggerNow.X=i:i>=this.pMax.X?this.pDraggerNow.X=this.pMax.X:i<this.pMin.X&&(this.pDraggerNow.X=this.pMin.X),e>=this.pMin.Y&&e<this.pMax.Y?this.pDraggerNow.Y=e:e>=this.pMax.Y?this.pDraggerNow.Y=this.pMax.Y:e<this.pMin.Y&&(this.pDraggerNow.Y=this.pMin.Y),this.setTop(this.pDraggerNow.Y),this.setLeft(this.pDraggerNow.X),this.pLast=t,!1},ot.prototype.uponTouchDrag=function(t){var e=t||window.event;null!=e.preventDefault&&e.preventDefault();try{if(this.touch=this.getTouchByIdentifer(e),null==this.touch)return!1;var i={X:this.touch.pageX-this.touchOffsetX,Y:this.touch.pageY-this.touchOffsetY};this.repositionTouch(i)}catch(t){B("uponTouchDrag ERROR: "+t)}return!1},ot.prototype.uponDrag=function(t){var e=t||window.event;if(this.obj.dragging)return!1;this.obj.dragging=!0,null!=e.preventDefault&&e.preventDefault();var i=this.getPosition(e);return this.timeout&&window.cancelAnimationFrame(this.timeout),this.timeout=window.requestAnimationFrame(function(){this.reposition(i)}.bind(this)),this.obj.dragging=!1},ot.prototype.uponTouchStart=function(t){var e=t||window.event;null!=e.preventDefault&&e.preventDefault();var i=this.obj;i.style;return this.touchIdentifier==ot.TOUCH_IDENTIFER_UNUSED&&(this.touch=e.changedTouches[0],this.touchOffsetX=Math.round(this.touch.pageX)-parseInt(this.root.offsetLeft),this.touchOffsetY=Math.round(this.touch.pageY)-parseInt(this.root.offsetTop),this.touchIdentifier=this.touch.identifier,this.pMin=this.getDefaultMin(),this.pMax=this.getDefaultMax(),i.style.cursor=this.cursor,this.addTouchEvents(),!(this.pLast={X:this.touch.pageX-this.clickOffsetX,Y:this.touch.pageY-this.clickOffsetY}))},ot.prototype.uponDragStart=function(t){var e=t||window.event;null!=e.preventDefault&&e.preventDefault();var i=this.obj;return this.isLeftClick(e)&&(this.pDraggerNow={X:parseInt(this.root.offsetLeft),Y:parseInt(this.root.offsetTop)},this.pLast=this.getPosition(e),this.deltaX=this.pLast.X-this.pDraggerNow.X,this.deltaY=this.pLast.Y-this.pDraggerNow.Y,this.pMin=this.getDefaultMin(),this.pMax=this.getDefaultMax(),i.style.cursor=this.cursor,(ot.instance=this).frame.style.pointerEvents="none",this.addMouseEvents()),!1},ot.prototype.setDragBorder=function(){},ot.prototype.getDefaultMax=function(){return{X:1e4,Y:1e4}},ot.prototype.getDefaultMin=function(){return{X:0,Y:0}},ot.prototype.setLeft=function(t){B("setLeft override failed")},ot.prototype.setTop=function(t){B("setTop override failed")},ot.prototype.whenDone=function(){},ot.prototype.isSupported=function(t){return"on"+t in document.documentElement},ot.prototype.getPositionIE=function(t){return{X:window.parent.event.clientX,Y:window.parent.event.clientY}},ot.prototype.getPositionGecko=function(t){return{X:t.clientX,Y:t.clientY}},ot.prototype.getPosition=function(t){return{X:t.clientX,Y:t.clientY}},ot.prototype.clear=function(){this.root[ot.INSTANCE_LABEL]=null,this.obj[ot.INSTANCE_LABEL]=null,this._removeEventListener(this.obj,"touchstart",this.uponTouchStartClosure),this._removeEventListener(this.dragImage,"mousedown",this.uponMouseDragStartClosure)},ot.prototype.uponMouseDropClosure=null,ot.prototype.uponMouseDragClosure=null,ot.prototype.uponMouseOutClosure=null,ot.prototype.uponMouseDragStartClosure=null,ot.prototype.uponTouchDragClosure=null,ot.prototype.uponTouchEndClosure=null,ot.prototype.uponTouchCancelClosure=null,ot.prototype.uponTouchStartClosure=null,ot.prototype.deltaY=null,ot.prototype.deltaX=null,ot.prototype.pMax=null,ot.prototype.pMin=null,ot.prototype.rootWidth=null,ot.prototype.rootHeight=null,ot.prototype.draggerHeight=null,ot.prototype.draggerWidth=null,ot.prototype.pDraggerNow=null,ot.prototype.pDraggerStart=null,ot.prototype.pStart=null,ot.prototype.pLast=null,ot.prototype.touchIdentifier=null,ot.prototype.touchOffsetY=null,ot.prototype.touchOffsetX=null,ot.prototype.clickOffsetY=null,ot.prototype.clickOffsetX=null,ot.prototype.touch=null,ot.prototype.styleSaved=null,ot.prototype.cursor=null,ot.prototype.root=null,ot.prototype.dragImage=null,ot.prototype.obj=null,ot.TOUCH_IDENTIFER_UNUSED=-1,ot.INSTANCE_LABEL="instDragResize",ot.doc=window.parent.document,ot.instance=null,ot.DEFAULT_BORDER_COLOR="SlateGray";var st=function(t){ot.call(this),this.className="Move",this.cursor="move",this.dm=t};for(var rt in ot.prototype)st.prototype[rt]=ot.prototype[rt];st.setDragable=function(t){var e=new st(t),i=window.parent.document,n=i.getElementById(x.frameID),o=i.getElementById("nuanTitleBar");e.init(o,n)},st.prototype.setTop=function(t){this.root.style.top=t+"px"},st.prototype.setLeft=function(t){this.root.style.left=t+"px"},st.prototype.whenDone=function(){this.root.style.left=String(this.pDraggerNow.X)+"px",this.root.style.top=String(this.pDraggerNow.Y)+"px";var t={X:this.pDraggerNow.X,Y:this.pDraggerNow.Y};L.moveStage(t.X,t.Y)},st.prototype.getDefaultMax=function(){var t=parseInt(window.getComputedStyle(this.root).width),e=parseInt(window.getComputedStyle(this.root).height);return{X:it.getScrollWidth()-t,Y:it.getScrollHeight()-e-("horizontal"==this.dm?parseInt(this.root.style.bottom):0)}},st.prototype.getDefaultMin=function(){var t=parseInt(window.getComputedStyle(this.root).height);return{X:0,Y:"horizontal"==this.dm?it.getScrollHeight()-parseInt(this.root.style.bottom)-t:0}};var at=null,lt=new tt;return{initializeMessagingSDK:function(t,e,i,n){this.addEventListeners(),u.dataCenter=t,u.tagServerName=e,u.vendorUUID=i;var o=(window.mwfGlobals?window.mwfGlobals:{}).messengerWebSDK,s=window.NUANCE_JS?window.NUANCE_JS:{},r=o||s,a=r.tagDomain?r.tagDomain:window.NUANCE_JS&&window.NUANCE_JS.isCloudEnabled()?"https://tag-wellsfargo.digital.nuance.com/nuanceapi":"https://tag-wellsfargo.nod-glb.nuance.com/nuanceapi";function l(t,e){t.markSendTime(0),t.markFirstByteTime(0),t.markRespAvailTime(0),t.markRespProcTime(e),window.ADRUM.report(t)}!function(e,t){var i;switch(t){case"config":i=c}return i&&i.every(function(t){if(!e[t])return!1})}(u,"config")?(x.setPageData("pageUrl",p.URL),x.setPageData("bootstrap1PCSolution",!0),x.setPageData("pageReferrer",p.referrer),x.setPageData("inqSiteID",window.inqSiteID),x.setPageData("inqSalesProducts",window.inqSalesProducts),x.setPageData("inqSalesQuantities",window.inqSalesQuantities),x.setPageData("inqSalesProductTypes",window.inqSalesProductTypes),x.setPageData("inqSalesProducts2",window.inqSalesProducts2),x.setPageData("inqSalesQuantities2",window.inqSalesQuantities2),x.setPageData("inqSalesPrices2",window.inqSalesPrices2),x.setPageData("inqOrderType",window.inqOrderType),x.registerForMessagingEvents(x.Events.ON_C2C_READY,lt.render.bind(lt)),x.registerForMessagingEvents(x.Events.ON_C2C_STATE_CHANGED,function(t){if(t){var e=lt.IMAGETYPES[t.newState];e&&lt.renderState(e,t)}}),x.registerForMessagingEvents(x.Events.ON_C2C_DISPLAYED,function(t){F(et.VirtualKeyboardOpenCloseHandler)||et.VirtualKeyboardOpenCloseHandler.addListener(t)}),x.registerForMessagingEvents(x.Events.ON_C2C_CLICKED,function(t){t&&(tt.lastusedC2CId=t.pageElementID,tt.c2cBtnId=null,F(et.VirtualKeyboardOpenCloseHandler)||et.VirtualKeyboardOpenCloseHandler.removeListener(t))}),x.registerForMessagingEvents(x.Events.ON_CHAT_CLOSED,function(){lt.clear(),L&&L.clear(),at&&at.removeListener()}),x.registerForMessagingEvents(x.Events.ON_TRANSCRIPT_RCV_EVENT,function(t){var e=(new Date).getTime()-d;h&&(h.url(a+"chathistory"),l(h,e),setTimeout(function(){t.responseTime&&(h.url(a+"/chathistorynuancedelta"),l(h,t.responseTime))},2e3))}),x.registerForMessagingEvents(x.Events.ON_FRAMEWORK_READY_EVENT,function(t){var e=(new Date).getTime()-d;h&&(h.url(a+"/chatframeload"),l(h,e),setTimeout(function(){t.loadingTime&&(h.url(a+"/chatframeloadnuancedelta"),l(h,t.loadingTime))},2e3)),window.WF_NUANCE&&window.WF_NUANCE.fireDrawerCustomEvent&&window.WF_NUANCE.shouldTriggerDrawerEvent&&(window.WF_NUANCE.fireDrawerCustomEvent(),window.WF_NUANCE.shouldTriggerDrawerEvent=!1)}),x.registerForMessagingEvents(x.Events.ON_CHAT_LAUNCHED,lt.setDisabled.bind(lt)),x.registerForMessagingEvents(x.Events.ON_CHAT_SHOWN,function(){at=new W}),n&&n()):B("Failed to initialize SDK, invalid or missing parameters.")},addEventListeners:function(){var t=this.pageshowEventCallback.bind(this);window.removeEventListener("pageshow",t),window.addEventListener("pageshow",t)},pageshowEventCallback:function(t){t.persisted&&setTimeout(function(){window.location.reload()},10)},getAndSetSDKConfig:function(){return x},loadChatAssets:function(t){p.getElementById(x.frameID)||(x.siteID?(t?function(){if("undefined"!=typeof jQuery&&jQuery.isReady)_(1);else if(void 0===p.readyState)p.addEventListener&&(p.addEventListener("load",_,!1),p.addEventListener("DOMContentLoaded",_,!1)),_(100);else{var t=navigator.userAgent.match(/Trident\/(\d+)/),e=t&&2==t.length&&6<=parseInt(t[1]);if("complete"==p.readyState&&e)_();else if(e||!p.all||window.opera)(p.addEventListener||e&&p.attachEvent)&&(/loaded|complete/.test(p.readyState)?_():setTimeout(arguments.callee,100));else{var i=p.createElement("script");i.setAttribute("type","text/javascript"),i.setAttribute("id","v3ContentLoadTag"),i.setAttribute("defer","defer"),p.body.appendChild(i);var n=p.getElementById("v3ContentLoadTag");n?n.onreadystatechange=function(){"complete"==this.readyState&&_(100)}:"complete"==p.readyState?_(1):p.attachEvent("onreadystatechange",function(){"complete"===p.readyState&&(p.detachEvent("onreadystatechange",arguments.callee),_(1))})}}}:_)():B("site ID is found in config object."))},addCustomJavascript:function(t,e){w[t]=e},SDKAPI:{launchChatByRuleID:function(t){H(new U("LAUNCH_CHAT_RULEID",t))},launchChatNowByRuleName:function(t){H(new U("LAUNCH_CHAT_RULENAME",t))},suppressChatForSession:function(){H(new U("BLOCK_CHAT_SESSION"))},reInitChat:function(t,e){lt.clear();for(var i=v.length;i--;)V(v[i].target,v[i].type,v[i].listener);v=[],H(new U("REINIT_CHAT",{pageID:t,data:e},{pageUrl:p.URL}))},fireCustomEvent:function(t,e,i){H(new U("CUSTOM_EVENT",{eventName:t,data:e},i))},sendAutomatonMessage:function(t,e){H(new U("SEND_AUTOMATON_MSG",{msgType:t,msg:e}))},sendReadyFocus:function(t){H(new U("READY_FOCUS",t))},closeChat:function(){H(new U("CLOSE_CHAT")),O=[]},getChatID:function(t){var e=new U("GET_CHAT_ID");e.setCallback(t),O.push(e),H(e)},isFrameworkInitialized:function(t){var e=new U("IS_INITIALIZED");e.setCallback(t),O.push(e),H(e)},getBRPublishedVariableRef:function(t,e){var i=new U("DYNAMIC_API_REF",t);i.setCallback(e),O.push(i),H(i)},publishNewPageData:function(t){H(new U("NEW_PAGE_DATA","",t))},onRestoredClicked:function(){H(new U("FRAME_RESTORED")),window.NuanMessaging.SDKAPI.fireCustomEvent("onChatRestored"),L&&L.setVisible(!0),lt&&lt.setDisabled()},ciMinimize:function(){L&&!L.isMinimized()&&H(new U("MINIMIZE_FRAME"))},updateLogo:function(t){Object(t)===t?H(new U("UPDATE_LOGO",t)):logError("updateLogo expects an object, with 'imgname' or 'imgsrc' properties")},updateTitle:function(t){t&&H(new U("UPDATE_TITLE",t))},autoEngage:function(t){H(new U("AUTO_ENGAGE",t))}},getC2CMgr:function(){return lt},CIAPI:{onC2CClicked:function(t,e){if(2==arguments.length||!m||a){var i=new U("C2C_ACTION",t);i.setCallback(lt.c2cCallbackHandler.bind(lt,e)),O.push(i),H(i)}else logError("Missing arguments, needs c2cid and a callback to continue")},chatDisplayed:function(t){if("object"==typeof t){var e=new U("CIAPI_CHAT_DISPLAYED",{customerName:t.customerName,openerScripts:t.openerScripts,defaultAgentAlias:t.defaultAgentAlias});if(t.previousMessagesCb){var i=new U("CIAPI_CHAT_PREVIOUS_MSGS");i.setCallback(t.previousMessagesCb,!1),O.push(i)}if(t.disconnectCb){var n=new U("CIAPI_CHAT_DISCONNECTED");n.setCallback(t.disconnectCb,!1),O.push(n)}if(t.reConnectCb){var o=new U("CIAPI_CHAT_RECONNECTED");o.setCallback(t.reConnectCb,!1),O.push(o)}if(t.failedCb){var s=new U("CIAPI_CHAT_FAILED");s.setCallback(t.failedCb,!1),O.push(s)}H(e)}},engageChat:function(t,e){var i=new U("CIAPI_ENGAGED_CHAT",t);e&&(i.setCallback(e),O.push(i)),H(i)},getMessages:function(t){var e=new U("GET_CIAPI_MESSAGES");t&&(e.setCallback(t,!1),O.push(e)),H(e)},closeChat:function(){H(new U("CLOSE_CIAPI_CHAT")),O=[]},confirmAndClose:function(){H(new U("CLOSE_WITH_CONFIRM")),O=[]},sendMessage:function(t){H(new U("SEND_CIAPI_MESSAGE",t))},sendActivityMessage:function(t){H(new U("SEND_CIAPI_ACTIVITY",t))},requestEmailTranscript:function(t){H(new U("REQUEST_CIAPI_TRANSCRIPT",t))},isChatInProgress:function(t){var e=new U("GET_CIAPI_CHAT_STATE");t&&(e.setCallback(t),O.push(e)),H(e)},getOpenerScripts:function(t,e){var i=new U("GET_CIAPI_OPENERS",e);t&&(i.setCallback(t),O.push(i)),H(i)},sendDataPass:function(t){"object"==typeof t?H(new U("SEND_CIAPI_DATAPASS",t)):logError("sendDataPass only accepts Object as its argument.")},sendVALinkMessage:function(t,e){var i,n=t.target||t.srcElement;if(i="A"==n.tagName?n:function(t,e){for(;t.parentNode&&t!=e;)if("A"===(t=t.parentNode).tagName)return t;return null}(n,t.currentTarget)){i.getAttribute("data-vtz-jump");var o,s=i.getAttribute("data-vtz-link-type"),r=i.getAttribute("data-vtz-browse");if("Web"==s&&r)o=(o="##Url#"+r).substring(0,100);else if("Dialog"==s)o=i.text,custMsgCb&&custMsgCb(o),t.preventDefault?t.preventDefault():t.returnValue=!1;else{if("touchend"!=t.type||!t.target.href||""==t.target.href)return!1;t.preventDefault(),window.setTimeout(function(){window.parent.location.href=t.target.href},1e3)}var a={};a.text=o,a.attributes={};for(var l=i.attributes,d=0;d<l.length;d++){var h=l[d].name;h.startsWith("data-vtz")&&(a.attributes[h.replace("data-","")]=l[d].value)}H(new U("SEND_CIAPI_VA_LINK",a))}},sendRichContentMessage:function(t,e){H(new U("SEND_CIAPI_RICH_MSG",{text:t,data:e}))},getPreviousAsyncTranscript:function(t){var e=new U("GET_CIAPI_PREV_CONV");t&&(e.setCallback(t),O.push(e)),H(e)},isLastConversationActive:function(t){var e=new U("GET_CIAPI_PREV_CONV_STATE");t&&(e.setCallback(t),O.push(e)),H(e)},getAsyncUnReadMsgCount:function(t,e){var i=new U("GET_CIAPI_ASYNC_UNREAD",t);e&&(i.setCallback(e),O.push(i)),H(i)},whenProactiveLaunch:function(t){var e=new U("PROACTIVE_CHAT_LAUNCH");t&&(e.setCallback(t),O.push(e))},checkIfMinimized:function(t){var e=new U("IS_MINIMIZED");t&&(e.setCallback(t),O.push(e)),H(e)}}}}();