var Calc=(function(){function Obj(form,scan){this.form=this.load(arguments);}var f1=".prin",f2=".term",f3=".rate",f4=".doit",d1=".head",d2=".cost",d3=".inst",d4=".disc",d5="#ghostRate";var form,scan,self;$.extend(Obj.prototype,{find:BASE.find,calc:function(){var A=this.find.apply(0,arguments);return A.toFixed(2);},lark:function(val){return;d5.text(val).parent().fadeIn(3333).fadeOut(1111,function(){(f3.val()!=="")||f3.val(val);});self.submit();},load:function(args){form=$(args[0]).eq(0),scan=args[1];self=this;f1=linkto(f1),f2=linkto(f2),f3=linkto(f3),f4=linkto(f4);d1=linkto(d1),d2=linkto(d2),d3=linkto(d3),d4=linkto(d4);d5=linkto(d5).parent().show().css("opacity",0.9).fadeOut().end();f1.add(f3).bind("blur",function(){self.submit();});f4.bind("click",function(){self.submit();});self.optionize();self.submit();return form;},submit:function(){var v1,v2,v3,v4;v1=clean(f1.val());f1.val(format(v1));v2=parseInt($("#cF2 option:selected").text())||0;v3=f3.val();v4=clean(self.calc(v1,v3,v2));self.display(v4);return false;},display:function(v){if(v>0&&v<Infinity){d2.text("$"+format(v));d2.show(),d3.hide(),d4.show();}else{d2.hide(),d3.show(),d4.hide();}},optionize:function(){var m=scan.matrix(),i;for(i=0;i<m.length;i++){$("<option>").text(m[i][0]).val(m[i][1]).appendTo(f2);}f2.bind("change",function(){if($.standard()){self.lark($("#cF2 option:selected").val());}});}});return Obj;function clean(str){str=(typeof str==="string")?str:rightype(str);str=str.replace(/[^\.\d]/g,"");str=Math.round(str*100)/100;return rightype(str);}function linkto(str){var f=$(str,form);if(str.charAt(0)==="."){f=f.eq(0);}return f;}function format(num){var reg=/(\d{1,3})(\d\d\d\b)/g;num=((typeof num==="number")?num:clean(num))+"";while(num.match(reg)){num=num.replace(reg,"$1,$2");}if(num.match(/(\.\d)$/)){num+="0";}return num;}function rightype(x){return(typeof x==="string")?(parseFloat(x)||0):(x+"");}})();