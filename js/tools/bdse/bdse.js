$(document).ready(function(){WF.bdse.init();});WF.bdse={lang:$("html").attr("lang"),emptyCompareCard:$("#cardCompareSticky .cardContainer .compareCard:first").children().first().clone(),init:function(){var selectionsData=false;$("#cardContainer .removeCard").hide();WF.bdse.emptyCompareCard=$("#cardCompareSticky .cardContainer .compareCard:first").children().first().clone();WF.bdse.bdseEventHandler();WF.bdseC2T.c2tEventBindings();WF.bdse.preSelectedAccounts();WF.bdse.enableAccessibilityText();WF.bdse.checkboxAccessibilityPL();WF.bdse.resultsPageTableHeader();WF.bdse.applyByPhone();},preSelectedAccounts:function(){selectionsData=false;if($('.compareCheckBox input[type="checkbox"]:checked').length>0){$('.compareCheckBox input[type="checkbox"]:checked').prop("checked",false);}$("input.checked").removeClass("checked");if(bdseSelectedAccounts!==undefined){if(bdseSelectedAccounts.length>0){for(var i=0;i<bdseSelectedAccounts.length;i++){var cardVal=bdseSelectedAccounts[i].trim();$(":input:checkbox[value='"+cardVal+"']").eq(0).addClass("checked");}}}if($("input.checked").size()>0){$("input.checked").each(function(){$(this).removeClass("checked");$(this).trigger("click");});selectionsData=true;}else{selectionsData=true;}},compareEnable:function(){if($("input:checked").size()>1){$(".compare-button input").removeAttr("disabled");}else{if($("input:checked").size()==1){$("#shell").addClass("ccstFootnote");$("#cardCompareSticky").show();$(".compare-button input").attr("disabled",true);}else{$("#cardCompareSticky").hide();$(".compare-button input").attr("disabled",true);$("#shell").removeClass("ccstFootnote");}}},updateAriaLiveRegionText:function(cardName,spanishText,englishText){var isSpanish=(window.location.href.indexOf("/es/")>-1);$("#cardCompareSticky").find(".liveregion").text(cardName+(isSpanish?spanishText:englishText));},addCard:function(newSrc,accountName,checkId,cardName){WF.bdse.updateAriaLiveRegionText(cardName," se agregó al grupo de comparación"," was added to the comparison group");var editCard=$("#cardContainer .compareCard").not(".placed").eq(0).addClass("placed").children().first();editCard.removeClass("cardPlaceholder").addClass("cardData "+checkId).attr("data-card-id",checkId);editCard.find("img:first").attr("src",newSrc).attr("alt","").next("p").html(accountName);$("#cardContainer .placed .removeCard").show();},removeCard:function(checkId,cardName){WF.bdse.updateAriaLiveRegionText(cardName," se eliminó del grupo de comparación"," was removed from the comparison group");$(".compareCard").find("."+checkId).parent().removeClass("placed").html(WF.bdse.emptyCompareCard.clone());},compareSticky:function(evt){var sourceElm=$("input:checkbox[value='"+$(this).val()+"']");var checkId=$(this).attr("id");var cardName=$(this).parents("div.c101").find(".cardDetailContainer h2 span").text();var accountName;if($(this).prop("checked")){if($('.compareCheckBox input[type="checkbox"]:checked').length>3){if(WF.bdse.lang=="es"){alert("Solo puede comparar 3 cuentas a la vez.");}else{alert("You can only compare 3 accounts at a time.");}$(this).prop("checked",false);evt.preventDefault();return false;}else{sourceElm.not($(this)).addClass("checked");}var newSrc=$(this).parents("div.c101").find(".cardDetailContainer .cardDetailWrapperRight .c89img img").attr("src"),accountName=$(this).parents("div.c101").find(".cardDetailContainer h2 span").html();WF.bdse.addCard(newSrc,accountName,checkId,cardName);}else{WF.bdse.removeCard(checkId,cardName);accountName=$(this).parents("div.c101").find(".cardDetailContainer h2 span").html();sourceElm.not($(this)).removeClass("checked");}$(this).toggleClass("checked");WF.bdse.compareEnable();if(selectionsData==true){var selectedCardProperties={};selectedCardProperties.checkboxId=$(this).attr("value");selectedCardProperties.isChecked=$(this).prop("checked")==true?"true":"false";selectedCardProperties.pageIdentifier="BDSE_"+pageIdentifier;selectedCardProperties.clickType="RADIOBUTTON";selectedCardProperties.clickItemName=$(this).prop("checked")==true?"Selection":"Deselection";selectedCardProperties.clickPurposeName=$(this).parents("span").attr("data-purposename");selectedCardProperties.productCode="BIZCHK";selectedCardProperties.lang=WF.bdse.lang;$.post("/as/biz/checkings/selectedAccountList",selectedCardProperties,function(response){isSelectionDone=true;},"xml");}},bdseEventHandler:function(){$("div.compareCheckBox").on("change",'input[type="checkbox"]',WF.bdse.compareSticky);$(".cardContainer").on("click","a.removeCard",function(evt){evt.preventDefault();if($("#cardContainer .placed").length==1){$("#shell").removeClass("bdseFootnote");}var chkCardId=$(this).parent().attr("data-card-id");$("input#"+chkCardId).trigger("click");});$(".compare-button input[type=button]").on("click",function(){var buttonText=$(this).val();WF.bdseC2T.fireC2TBDSEConsiderationEvent("BDSE",pageIdentifier,buttonText,"BUTTON","BIZCHK");if(WF.bdse.lang=="es"){window.location.assign("/es/biz/checking/compare-checking-accounts/results");}else{window.location.assign("/biz/checking/compare-checking-accounts/results");}return false;});$("#compareResults .iconCompareClose").on("click",function(evt){evt.preventDefault();var $self=$(evt.target);var $dataitem="card"+$self.attr("data-item")+"";var $placeHolder=$("#compareResults .addCard.hide > .cardContent").clone();$("#bdse-table th[data-item="+$dataitem+"]").empty().addClass("addCardPlaceholder").append($placeHolder);$(".addCardPlaceholder .c93").focus();$("#bdse-table td[data-item="+$dataitem+"]").empty();var data={};data.checkboxId=$(this).attr("value");data.pageIdentifier="BDSE_"+pageIdentifier;data.isChecked="false";data.clickType="IMAGE";data.clickItemName="Remove";data.lang=WF.bdse.lang;data.clickPurposeName=$(this).parent("span").attr("data-purposename");$.ajax({url:"/as/biz/checkings/selectedAccountList",type:"POST",data:data,success:WF.bdse.afterAJAXComplete});});},checkToShowRemoveIcon:function(){if($("#compareResults .iconCompareClose img").length<=1){$(".iconCompareClose").parent().remove();}},enableAccessibilityText:function(){if($("#compareResults .iconCompareClose img:visible").length<=2){if(WF.bdse.lang=="es"){$(".ui-hidden-accessible").text("Elimine cuenta, y volver a la página Compare las cuentas de cheques.");}else{$(".ui-hidden-accessible").text("Remove account, and return to the Compare Checking Accounts page.");}}},afterAJAXComplete:function(){var compareCheckingAccountsURL="/biz/checking/compare-checking-accounts/";if(WF.bdse.lang=="es"){compareCheckingAccountsURL="/es/biz/checking/compare-checking-accounts/";}var cardCount=0;if($('[data-item="1"]').is(":visible")){cardCount++;}if($('[data-item="2"]').is(":visible")){cardCount++;}if($('[data-item="3"]').is(":visible")){cardCount++;}WF.bdse.checkToShowRemoveIcon();if(cardCount==1){window.location.assign(compareCheckingAccountsURL);}},checkboxAccessibilityPL:function(){$(".cardDetailContainer").each(function(){var cardText=$(this).parent().find("h2 span").text();$("label span.ui-hidden-accessible",$(this)).text(cardText);});},resultsPageTableHeader:function(){if($("#bdse-table").is(":visible")){var top=$("#bdse-table").offset().top;$(window).scroll(function(event){var y=$(this).scrollTop();if(y>=280){$("thead").addClass("shadow");}else{$("thead").removeClass("shadow");}});}},applyByPhone:function(){var applyLink=$("a.c28bLink.c93").attr("href","javascript:void(0);");applyLink.on("click",function(e){e.preventDefault();});}};WF.bdseC2T={c2tClickEvent:function(applicationCode,pageIdentifier,clickName,clickType,productCode,clickPurposeName,subProductCode){var stdOptions={"url":window.location.href,"applicationCode":applicationCode,"eventStructure[ClickCreator]":applicationCode+"_"+pageIdentifier+"_Click","headerStructure[HeaderCreator]":"header_"+applicationCode,"data[clickType]":clickType,"data[clickItemName]":clickName,"data[clickPurposeName]":clickPurposeName,"data[product]":productCode,"data[subProduct]":subProductCode};WF.bdseC2T.logC2TtoolEvent(stdOptions);
},fireC2TBDSECompletionEvent:function(applicationCode,pageIdentifier,clickName,clickType,productCode,clickPurposeName,subProductCode,callback){var stdOptions={"log":1,"url":window.location.href,"applicationCode":applicationCode,"eventsOrder":[{"CompletionCreator":" 1"},{"ClickCreator":"2"}],"eventStructure[ClickCreator]":applicationCode+"_"+pageIdentifier+"_Click","eventStructure[CompletionCreator]":applicationCode+"_"+pageIdentifier+"_Completion","headerStructure[HeaderCreator]":"header_"+applicationCode,"data[clickType]":clickType,"data[clickItemName]":clickName,"data[clickPurposeName]":clickPurposeName,"data[product]":productCode,"data[subProduct]":subProductCode};WF.bdseC2T.logC2TtoolEvent(stdOptions).done(callback);},fireC2TBDSEConsiderationEvent:function(applicationCode,pageIdentifier,clickName,clickType,productCode,clickPurposeName,subProductCode){var stdOptions={"log":1,"url":window.location.href,"applicationCode":applicationCode,"eventsOrder":[{"ConsiderationCreator":" 1"},{"ClickCreator":"2"}],"eventStructure[ClickCreator]":applicationCode+"_"+pageIdentifier+"_Click","eventStructure[ConsiderationCreator]":applicationCode+"_"+pageIdentifier+"_Consideration","headerStructure[HeaderCreator]":"header_"+applicationCode,"data[clickType]":clickType,"data[clickItemName]":clickName,"data[clickPurposeName]":clickPurposeName,"data[product]":productCode,"data[subProduct]":subProductCode};WF.bdseC2T.logC2TtoolEvent(stdOptions);},logC2TtoolEvent:function(toolsData){return $.ajax({url:"/c2tEvents/event",type:"POST",data:toolsData});},applyNow:function(currentElement){var tagText=currentElement.text();var applyHref=currentElement.attr("href");var accountName=$(this).parents("span").attr("data-purposename");if(tagText=="Add an Account"||tagText=="Agregue una cuenta"){WF.bdseC2T.fireC2TBDSEConsiderationEvent("BDSE",pageIdentifier,tagText,"BUTTON","BIZCHK",accountName);}else{WF.bdseC2T.fireC2TBDSECompletionEvent("BDSE",pageIdentifier,tagText,"BUTTON","BIZCHK",accountName,null,function(){if(applyHref=="javascript:void(0);"){return false;}else{window.location.href=applyHref;}});}},c2tEventBindings:function(){$(document).on("click","#bdse-table div.btnContainer a",function(evt){evt.preventDefault();var applyHref=$(this).attr("href");WF.bdseC2T.applyNow($(this));if(applyHref=="javascript:void(0);"){return false;}else{window.location.href=applyHref;}});$("div.c101 .c93").on("click",function(evt){var tagText=$(this).text();var accountName=$(this).parents("span").attr("data-purposename");WF.bdseC2T.fireC2TBDSEConsiderationEvent("BDSE",pageIdentifier,tagText,"BUTTON","BIZCHK",accountName);});$("#bdse-table h2 a").on("click",function(evt){var accountName=$(this).parents("span").attr("data-purposename");WF.bdseC2T.c2tClickEvent("BDSE",pageIdentifier,accountName,"LINK","BIZCHK",accountName);});}};