$(document).ready(function(){$("#productContainer .removeProduct").hide();var $emptyCompareCard=$("#productCompareSticky .productContainer .compareProduct:first").children().first().clone();function compareEnable(){if($("input:checked").size()>1){$(".compare-button input").removeAttr("disabled");}else{if($("input:checked").size()==1){$("#shell").addClass("bddsFootnote");$("#productCompareSticky").show();$(".compare-button input").attr("disabled",true);}else{$("#productCompareSticky").hide();$(".compare-button input").attr("disabled",true);$("#shell").removeClass("bddsFootnote");}}}function updateAriaLiveRegionText(cardName,spanishText,englishText){var isSpanish=(window.location.href.indexOf("/es/")>-1);$("#productCompareSticky").find(".liveregion").text(cardName+(isSpanish?spanishText:englishText));}function addCard(newSrc,cardName,checkId){updateAriaLiveRegionText(cardName," se agreg贸 al grupo de comparaci贸n"," was added to the comparison group");var $editCard=$("#productContainer .compareProduct").not(".placed").eq(0).addClass("placed").children().first();$editCard.removeClass("productPlaceholder").addClass("cardData "+checkId).attr("data-card-id",checkId);$editCard.find("img:first").attr("src",newSrc).attr("alt","").next("p").html(cardName);$("#productContainer .placed .removeProduct").show();}function removeCard(checkId,cardName){updateAriaLiveRegionText(cardName," se elimin贸 del grupo de comparaci贸n"," was removed from the comparison group");$(".compareProduct").find("."+checkId).parent().removeClass("placed").html($emptyCompareCard.clone());}function compareSticky(evt){var $sourceElm=$("input:checkbox[value='"+$(this).val()+"']");if($(this).prop("checked")&&$(this).hasClass("checked")){$(this).prop("checked",false);$sourceElm.removeClass("checked").filter(":checked").addClass("checked").trigger("click");evt.preventDefault();return false;}var checkId=$(this).attr("id");var cardName;if($(this).prop("checked")){if($('.compareCheckBox input[type="checkbox"]:checked').length>3){alert("You can only compare 3 products at a time.");$(this).prop("checked",false);evt.preventDefault();return false;}else{$sourceElm.not($(this)).addClass("checked");}var newSrc=$(this).parents("div.bcfProductContainer").find(".cardDetailContainer .cardDetailWrapperRight .c89img img").attr("src");cardName=$(this).parents("div.bcfProductContainer").find(".cardDetailContainer h2 a").html();addCard(newSrc,cardName,checkId);}else{cardName=$(this).parents("div.bcfProductContainer").find(".cardDetailContainer h2 a").html();removeCard(checkId,cardName);$sourceElm.not($(this)).removeClass("checked");}$(this).toggleClass("checked");compareEnable();if(selectionsData==true){var selectedProductProperties={checkboxId:$(this).attr("value"),isChecked:$(this).prop("checked")==true?true:false,pageIdentifier:pageIdentifier+"_Click",clickType:"RADIOBUTTON",clickItemName:$(this).prop("checked")==true?"Selection":"Deselection",clickPurposeName:$(this).parents("span").attr("data-purposename"),productCode:"BD"};$.post("/as/bdds/bcf/selectedProductList",selectedProductProperties,function(response){isSelectionDone=true;},"xml");}}$(".compare-button input[type=button]").on("click",function(){WF.Utils.fireC2TClickEvent("BD",pageIdentifier,"Compare","BUTTON","BD");window.location.href="/biz/business-credit/comparison";return false;});if(typeof categoryNameGlobal!=="undefined"){setDropDownActiveItem();}$(".drop-btn").on("click keyup",function(event){if($(".drop-btn").is(":focus")==true){setDropDownActiveItem();}});$("div.compareCheckBox").on("change",'input[type="checkbox"]',compareSticky);$(".productContainer").on("click","a.removeProduct",function(evt){evt.preventDefault();if($("#productContainer .placed").length==1){$("#shell").removeClass("bddsFootnote");}var chkCardId=$(this).parent().attr("data-card-id");$("input#"+chkCardId).trigger("click");});var selectionsData=false;if($('.compareCheckBox input[type="checkbox"]:checked').length>0){$('.compareCheckBox input[type="checkbox"]:checked').prop("checked",false);}$("input.checked").removeClass("checked");if(typeof bddsSelectedProducts!=="undefined"){if(bddsSelectedProducts.length>0){$("input[type=checkbox]").attr("aria-haspopup","false");$("#forHelpBalloon").attr("aria-hidden","true").hide();for(var i=0;i<bddsSelectedProducts.length;i++){var cardVal=bddsSelectedProducts[i].trim();$(":input:checkbox[value='"+cardVal+"']").eq(0).addClass("checked");}}}if($("input.checked").size()>0){$("input.checked").each(function(){$(this).removeClass("checked");$(this).trigger("click");});selectionsData=true;}else{selectionsData=true;}$("#forHelpBalloon").wrap("<div id='balloonsContainerSrc'></div>");var displayHelptext=function(){if($(this).is(":checked")&&isSelectionDone==false){var offset=$(this).offset();var $ballonContent=$("#balloonsContainerSrc .c29content");$ballonContent.css("right",offset.right);$ballonContent.css("top",offset.top+29);$ballonContent.css("display","inline");$("#balloonsContainerSrc .c29content").show();isSelectionDone=true;$("input[type=checkbox]").attr("aria-haspopup","false");}else{$("input[type=checkbox]").attr("aria-haspopup","false");$("#balloonsContainerSrc").remove();isSelectionDone=true;}};if(typeof isSelectionDone!=="undefined"){if(isSelectionDone==true){$("input[type=checkbox]").attr("aria-haspopup","false");$("#balloonsContainerSrc").remove();}}function setDropDownActiveItem(){$("#categoryDropdown ul li a").removeClass("active").removeAttr("class");$("#categoryDropdown ul li a").find("span").remove();$("#categoryDropdown ul li a[data-category='"+categoryNameGlobal+"']").addClass("active").append("<span class='hidden'>- You are here</span>");}function checkboxAccessibilityPL(){$(".comparebox-wrapper").each(function(){var cardText=$(this).parent().find("h2 a").text();$("label span.ui-hidden-accessible",$(this)).text(cardText);});}checkboxAccessibilityPL();$("input[type=checkbox]").on("click",displayHelptext);function checkToShowRemoveIcon(){if($("#compareProducts .iconCompareClose img").length<=2){$(".iconCompareClose").parent().remove();}}$("#compareProducts .iconCompareClose").on("click",function(evt){evt.preventDefault();var $self=$(evt.target);var $dataItem="product"+$self.attr("data-item")+"";var $placeholder=$("#compareProducts .addProduct.hide > .productContent").clone();$("#productComparisonTable th[data-item="+$dataItem+"]").empty().addClass("addProductPlaceholder").append($placeholder);$(".addProductPlaceholder .c93").focus();$("#productComparisonTable td[data-item="+$dataItem+"]").empty();checkToShowRemoveIcon();var data={checkboxId:$(this).attr("value"),pageIdentifier:pageIdentifier+"_Click",isChecked:false,clickType:"IMAGE",clickItemName:"Remove",clickPurposeName:$(this).parent("span").attr("data-purposename"),productCode:"BD"};$.post("/as/bdds/bcf/selectedProductList",data,function(response){return true;},"xml");});var fireC2TClickEventApplyNow=function(applicationCode,pageIdentifier,clickName,clickType,productCode,clickPurposeName,subProductCode,callback){var stdOptions={"url":window.location.href,"applicationCode":applicationCode,"eventStructure[ClickCreator]":pageIdentifier+"_Click","headerStructure[HeaderCreator]":"header_"+applicationCode,"data[clickType]":clickType,"data[clickItemName]":clickName,"data[clickPurposeName]":clickPurposeName,"data[product]":productCode,"data[subProduct]":subProductCode};logC2TtoolEventApplyNow(stdOptions).done(callback);};var logC2TtoolEventApplyNow=function(toolsData){return $.ajax({url:"/c2tEvents/event",type:"POST",data:toolsData});};$(document).on("click","div.bcfProductContainer .c93, #productComparisonTable div.btnContainer a",function(evt){var linkTest=this.href;var tagText=$.trim($(this).text().replace(/[\t\n]+/g," "));var productName=$(this).parents("span").attr("data-purposename");var strHref=$(this).attr("href");strHref=strHref.split("BD-");if(typeof strHref[1]!=="undefined"){var subCategeory=strHref[1];}if(subCategeory!=null){evt.preventDefault();fireC2TClickEventApplyNow("BD",pageIdentifier,tagText,"BUTTON","BD",productName,subCategeory,function(){window.location.href=linkTest;
});}else{WF.Utils.fireC2TClickEvent("BD",pageIdentifier,tagText,"BUTTON","BD",productName,subCategeory);}});$(document).on("click","div.bcfProductContainer h2 a, #productComparisonTable h2 a",function(evt){var productName=$(this).parents("span").attr("data-purposename");WF.Utils.fireC2TClickEvent("BD",pageIdentifier,productName,"LINK","BD",productName);});$(document).on("click","div.bcfProductContainer figure.c89img a, #productComparisonTable figure.productImage a",function(evt){var productName=$(this).parents("span").attr("data-purposename");WF.Utils.fireC2TClickEvent("BD",pageIdentifier,productName,"IMAGE","BD",productName);});});WF.bdds={init:function(){this.dropList=$("#categoryDropdown");this.button=$("#productCustomMenu button");this.body=$("body");this.bindButtonClickEvents();this.bindBodyClickEvents();this.bindKeyEvent();this.chevronUp=$(".dropdown-chevron-up");this.chevronDown=$(".dropdown-chevron-down");},bindButtonClickEvents:function(){this.button.on("click",$.proxy(this.checkMenuStatus,this));},checkMenuStatus:function(evt){evt.stopPropagation();if(this.chevronUp.hasClass("hidden")){this.openMenu();}else{this.closeMenu();}},openMenu:function(){this.chevronUp.removeClass("hidden");this.chevronDown.addClass("hidden");this.button.attr("aria-expanded","true");this.dropList.slideDown(300);},closeMenu:function(){this.chevronUp.addClass("hidden");this.chevronDown.removeClass("hidden");this.button.attr("aria-expanded","false");this.dropList.slideUp(300);},bindBodyClickEvents:function(){this.body.on("click",$.proxy(this.closeMenu,this));},keyMenuNavigation:function(event){var $current,$next,$target;$target=$(event.target);if(event.keyCode==38){if($target.parent("li").is(":first-child")){$next=$(".drop-btn");$next.trigger("focus");}else{$next=$target.parent("li").prev();}}if(event.keyCode==40){if($target.is("button")){$next=$("#categoryDropdown ul li:nth-child(1)");}else{$next=$target.parent("li").next();}}if(event.keyCode==38||event.keyCode==40){event.preventDefault();if($next.length>0){$next.find("a").trigger("focus");}}},altDownKeyEvt:function(event){var keyCode=event.keyCode||event.which;if((event.altKey&&keyCode==40)||(keyCode==40)){this.openMenu();}else{if(keyCode==9){this.closeMenu();}}},bindKeyEvent:function(event){$(".drop-down").on("keydown",$.proxy(this.keyMenuNavigation,this));$(".drop-down").on("keydown",$.proxy(this.altDownKeyEvt,this));}};WF.bdds.init();